<?xml version="1.0" encoding="ISO-8859-1" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1" />
    <title>3.8.2. Usar struct para combinar variables</title>
    <link rel="stylesheet" type="text/css" href="common.css" />
    <link rel="stylesheet" type="text/css" href="chunk.css" />
    <link rel="stylesheet" type="text/css" href="highlight.css" />
    <meta name="generator" content="DocBook XSL Stylesheets V1.76.1" />
    <link rel="home" href="index.html" title="Pensar en C++ (Volumen 1)" />
    <link rel="up" href="ch03s08.html" title="3.8. Creación de tipos compuestos" />
    <link rel="prev" href="ch03s08.html" title="3.8. Creación de tipos compuestos" />
    <link rel="next" href="ch03s08s03.html" title="3.8.3. Programas más claros gracias a enum" />
  </head>
  <body>
    <div class="navfooter">
      <hr />
      <table width="100%" summary="Navigation footer">
        <tr>
          <td class="navititle" width="1%">
            <a accesskey="p" href="ch03s08.html">
              <img src="./images/prev.png" alt="Anterior" />
            </a>
          </td>
          <td class="navititle" width="40%" align="left">
            <a accesskey="p" href="ch03s08.html">3.8. Creación de tipos compuestos</a>
          </td>
          <td width="10%" align="center">
            <a accesskey="u" href="ch03s08.html">
              <img src="./images/up.png" alt="Subir" />
            </a>
          </td>
          <td class="navititle" width="40%" align="right">
            <a accesskey="n" href="ch03s08s03.html">3.8.3. Programas más claros gracias a <code class="keyword">enum</code></a>
          </td>
          <td class="navititle" width="1%" align="right">
            <a accesskey="n" href="ch03s08s03.html">
              <img src="./images/next.png" alt="Siguiente" />
            </a>
          </td>
        </tr>
      </table>
    </div>
    <div class="sect2" title="3.8.2. Usar struct para combinar variables">
      <div class="titlepage">
        <div>
          <div>
            <h3 class="title"><a id="idp4819416"></a>3.8.2. 
        Usar <code class="keyword">struct</code> para combinar variables
      </h3>
          </div>
        </div>
      </div>
      <p>
        Un <code class="keyword">struct</code> es una manera de juntar un grupo de variables
        en una estructura. Cuando se crea un <code class="keyword">struct</code>, se pueden
        crear varias instancias de este «nuevo» tipo de
        variable que ha inventado. Por ejemplo:
      </p>
      <div class="example">
        <a id="idp4821696"></a>
        <div class="example-contents">
          <pre class="programlisting">
<span class="hl slc">//: C03:SimpleStruct.cpp</span>
<span class="hl kwb">struct</span> Structure1 <span class="hl opt">{</span>
  <span class="hl kwb">char</span> c<span class="hl opt">;</span>
  <span class="hl kwb">int</span> i<span class="hl opt">;</span>
  <span class="hl kwb">float</span> f<span class="hl opt">;</span>
  <span class="hl kwb">double</span> d<span class="hl opt">;</span>
<span class="hl opt">};</span>

<span class="hl kwb">int</span> <span class="hl kwd">main</span><span class="hl opt">() {</span>
  <span class="hl kwb">struct</span> Structure1 s1<span class="hl opt">,</span> s2<span class="hl opt">;</span>
  s1<span class="hl opt">.</span>c <span class="hl opt">=</span> <span class="hl str">'a'</span><span class="hl opt">;</span> <span class="hl slc">// Select an element using a '.'</span>
  s1<span class="hl opt">.</span>i <span class="hl opt">=</span> <span class="hl num">1</span><span class="hl opt">;</span>
  s1<span class="hl opt">.</span>f <span class="hl opt">=</span> <span class="hl num">3.14</span><span class="hl opt">;</span>
  s1<span class="hl opt">.</span>d <span class="hl opt">=</span> <span class="hl num">0.00093</span><span class="hl opt">;</span>
  s2<span class="hl opt">.</span>c <span class="hl opt">=</span> <span class="hl str">'a'</span><span class="hl opt">;</span>
  s2<span class="hl opt">.</span>i <span class="hl opt">=</span> <span class="hl num">1</span><span class="hl opt">;</span>
  s2<span class="hl opt">.</span>f <span class="hl opt">=</span> <span class="hl num">3.14</span><span class="hl opt">;</span>
  s2<span class="hl opt">.</span>d <span class="hl opt">=</span> <span class="hl num">0.00093</span><span class="hl opt">;</span>
<span class="hl opt">}</span> <span class="hl slc">///:~</span>
</pre>
        </div>
        <p class="title">
          <strong>Listado 3.44. C03/SimpleStruct.cpp</strong>
        </p>
      </div>
      <br class="example-break" />
      <p>
        La declaración de <code class="keyword">struct</code> debe acabar con una llave. En
        <code class="function">main()</code>, se crean dos instancias de
        <code class="type">Structure1</code>: <code class="varname">s1</code> y
        <code class="varname">s2</code>.  Cada una de ellas tiene su versión
        propia y separada de <code class="varname">c</code>, <code class="varname">I</code>,
        <code class="varname">f</code> y <code class="varname">d</code>. De modo que
        <code class="varname">s1</code> y <code class="varname">s2</code> representan
        bloques de variables completamente independientes. Para
        seleccionar uno de estos elementos dentro de
        <code class="varname">s1</code> o <code class="varname">s2</code>, se utiliza un
        <span class="token">.</span>, sintaxis que se ha visto en el cápitulo
        previo cuando se utilizaban objetos <code class="keyword">class</code> de C++ - ya
        que las clases surgían de <code class="keyword">struct</code>s, de ahí proviene esta
        sintaxis.
      </p>
      <p>
        Una cosa a tener en cuenta es la torpeza de usar
        <code class="type">Structure1</code> (como salta a la vista, eso sólo se
        requiere en C, y no en C++). En C, no se puede poner
        <code class="type">Structure1</code> cuando se definen variables, se debe
        poner <code class="type">struct Structure1</code>. Aquí es donde
        <code class="keyword">typedef</code> se vuelve especialmente útil en C:
      </p>
      <div class="example">
        <a id="idp4829488"></a>
        <div class="example-contents">
          <pre class="programlisting">
<span class="hl slc">//: C03:SimpleStruct2.cpp</span>
<span class="hl slc">// Using typedef with struct</span>
<span class="hl kwc">typedef</span> <span class="hl kwb">struct</span> <span class="hl opt">{</span>
  <span class="hl kwb">char</span> c<span class="hl opt">;</span>
  <span class="hl kwb">int</span> i<span class="hl opt">;</span>
  <span class="hl kwb">float</span> f<span class="hl opt">;</span>
  <span class="hl kwb">double</span> d<span class="hl opt">;</span>
<span class="hl opt">}</span> Structure2<span class="hl opt">;</span>

<span class="hl kwb">int</span> <span class="hl kwd">main</span><span class="hl opt">() {</span>
  Structure2 s1<span class="hl opt">,</span> s2<span class="hl opt">;</span>
  s1<span class="hl opt">.</span>c <span class="hl opt">=</span> <span class="hl str">'a'</span><span class="hl opt">;</span>
  s1<span class="hl opt">.</span>i <span class="hl opt">=</span> <span class="hl num">1</span><span class="hl opt">;</span>
  s1<span class="hl opt">.</span>f <span class="hl opt">=</span> <span class="hl num">3.14</span><span class="hl opt">;</span>
  s1<span class="hl opt">.</span>d <span class="hl opt">=</span> <span class="hl num">0.00093</span><span class="hl opt">;</span>
  s2<span class="hl opt">.</span>c <span class="hl opt">=</span> <span class="hl str">'a'</span><span class="hl opt">;</span>
  s2<span class="hl opt">.</span>i <span class="hl opt">=</span> <span class="hl num">1</span><span class="hl opt">;</span>
  s2<span class="hl opt">.</span>f <span class="hl opt">=</span> <span class="hl num">3.14</span><span class="hl opt">;</span>
  s2<span class="hl opt">.</span>d <span class="hl opt">=</span> <span class="hl num">0.00093</span><span class="hl opt">;</span>
<span class="hl opt">}</span> <span class="hl slc">///:~</span>
</pre>
        </div>
        <p class="title">
          <strong>Listado 3.45. C03/SimpleStruct2.cpp</strong>
        </p>
      </div>
      <br class="example-break" />
      <p>
        Usando <code class="keyword">typedef</code> de este modo, se puede simular (en C;
        intentar eliminar el <code class="keyword">typedef</code> para C++) que
        <code class="type">Structure2</code> es un tipo predefinido, como
        <code class="type">int</code> o <code class="type">float</code>, cuando define
        <code class="varname">s1</code> y <code class="varname">s2</code> (pero se ha de
        tener en cuenta de que sólo tiene información - características
        - y no incluye comportamiento, que es lo que se obtiene con
        objetos reales en C++). Observe que el <code class="keyword">struct</code> se ha
        declarado al principio, porque el objetivo es crear el
        <code class="keyword">typedef</code>. Sin embargo, hay veces en las que sería
        necesario referirse a <code class="keyword">struct</code> durante su definición. En
        esos casos, se puede repetir el nombre del <code class="keyword">struct</code> como
        tal y como <code class="keyword">typedef</code>.
      </p>
      <div class="example">
        <a id="idp4835760"></a>
        <div class="example-contents">
          <pre class="programlisting">
<span class="hl slc">//: C03:SelfReferential.cpp</span>
<span class="hl slc">// Allowing a struct to refer to itself</span>

<span class="hl kwc">typedef</span> <span class="hl kwb">struct</span> SelfReferential <span class="hl opt">{</span>
  <span class="hl kwb">int</span> i<span class="hl opt">;</span>
  SelfReferential<span class="hl opt">*</span> sr<span class="hl opt">;</span> <span class="hl slc">// Head spinning yet?</span>
<span class="hl opt">}</span> SelfReferential<span class="hl opt">;</span>

<span class="hl kwb">int</span> <span class="hl kwd">main</span><span class="hl opt">() {</span>
  SelfReferential sr1<span class="hl opt">,</span> sr2<span class="hl opt">;</span>
  sr1<span class="hl opt">.</span>sr <span class="hl opt">= &amp;</span>sr2<span class="hl opt">;</span>
  sr2<span class="hl opt">.</span>sr <span class="hl opt">= &amp;</span>sr1<span class="hl opt">;</span>
  sr1<span class="hl opt">.</span>i <span class="hl opt">=</span> <span class="hl num">47</span><span class="hl opt">;</span>
  sr2<span class="hl opt">.</span>i <span class="hl opt">=</span> <span class="hl num">1024</span><span class="hl opt">;</span>
<span class="hl opt">}</span> <span class="hl slc">///:~</span>
</pre>
        </div>
        <p class="title">
          <strong>Listado 3.46. C03/SelfReferential.cpp</strong>
        </p>
      </div>
      <br class="example-break" />
      <p>
        Si lo observa detenidamente, puede ver que
        <code class="varname">sr1</code> y <code class="varname">sr2</code> apuntan el uno
        al otro, guardando cada uno una parte de la información.
     </p>
      <p>
        En realidad, el nombre <code class="keyword">struct</code> no tiene que ser lo mismo
        que el nombre <code class="keyword">typedef</code>, pero normalmente se hace de esta
        manera ya que tiende a simplificar las cosas.
      </p>
      <div class="sect3" title="Punteros y estructuras">
        <div class="titlepage">
          <div>
            <div>
              <h4 class="title"><a id="idp4839160"></a>Punteros y estructuras</h4>
            </div>
          </div>
        </div>
        <p>
          En los ejemplos anteriores, todos los <code class="keyword">structs</code> se
          manipulan como objetos. Sin embargo, como cualquier bloque de
          memoria, se puede obtener la dirección de un objeto
          <code class="keyword">struct</code> (tal como se ha visto en
          <code class="filename">SelfReferential.cpp</code>). Para seleccionar
          los elementos de un objeto <code class="keyword">struct</code> en particular, se
          utiliza un <span class="token">.</span>, como se ha visto
          anteriormente. No obstante, si tiene un puntero a un objeto
          <code class="keyword">struct</code>, debe seleccionar un elemento de dicho objeto
          utilizando un operador diferente: el <span class="token">-&gt;</span>. A
          continuación, un ejemplo:
        </p>
        <div class="example">
          <a id="idp4842928"></a>
          <div class="example-contents">
            <pre class="programlisting">
<span class="hl slc">//: C03:SimpleStruct3.cpp</span>
<span class="hl slc">// Using pointers to structs</span>
<span class="hl kwc">typedef</span> <span class="hl kwb">struct</span> Structure3 <span class="hl opt">{</span>
  <span class="hl kwb">char</span> c<span class="hl opt">;</span>
  <span class="hl kwb">int</span> i<span class="hl opt">;</span>
  <span class="hl kwb">float</span> f<span class="hl opt">;</span>
  <span class="hl kwb">double</span> d<span class="hl opt">;</span>
<span class="hl opt">}</span> Structure3<span class="hl opt">;</span>

<span class="hl kwb">int</span> <span class="hl kwd">main</span><span class="hl opt">() {</span>
  Structure3 s1<span class="hl opt">,</span> s2<span class="hl opt">;</span>
  Structure3<span class="hl opt">*</span> sp <span class="hl opt">= &amp;</span>s1<span class="hl opt">;</span>
  sp<span class="hl opt">-&gt;</span>c <span class="hl opt">=</span> <span class="hl str">'a'</span><span class="hl opt">;</span>
  sp<span class="hl opt">-&gt;</span>i <span class="hl opt">=</span> <span class="hl num">1</span><span class="hl opt">;</span>
  sp<span class="hl opt">-&gt;</span>f <span class="hl opt">=</span> <span class="hl num">3.14</span><span class="hl opt">;</span>
  sp<span class="hl opt">-&gt;</span>d <span class="hl opt">=</span> <span class="hl num">0.00093</span><span class="hl opt">;</span>
  sp <span class="hl opt">= &amp;</span>s2<span class="hl opt">;</span> <span class="hl slc">// Point to a different struct object</span>
  sp<span class="hl opt">-&gt;</span>c <span class="hl opt">=</span> <span class="hl str">'a'</span><span class="hl opt">;</span>
  sp<span class="hl opt">-&gt;</span>i <span class="hl opt">=</span> <span class="hl num">1</span><span class="hl opt">;</span>
  sp<span class="hl opt">-&gt;</span>f <span class="hl opt">=</span> <span class="hl num">3.14</span><span class="hl opt">;</span>
  sp<span class="hl opt">-&gt;</span>d <span class="hl opt">=</span> <span class="hl num">0.00093</span><span class="hl opt">;</span>
<span class="hl opt">}</span> <span class="hl slc">///:~</span>
</pre>
          </div>
          <p class="title">
            <strong>Listado 3.47. C03/SimpleStruct3.cpp</strong>
          </p>
        </div>
        <br class="example-break" />
        <p>
          En <code class="function">main()</code>, el puntero
          <code class="varname">sp</code> está apuntando inicialmente a
          <code class="varname">s1</code>, y los miembros de <code class="varname">s1</code>
          se inicializan seleccionándolos con el <span class="token">-&gt;</span>
          (y se utiliza este mismo operador para leerlos). Pero luego
          <code class="varname">sp</code> apunta a <code class="varname">s2</code>, y esas
          variables se inicializan del mismo modo. Como puede ver, otro
          beneficio en el uso de punteros es que pueden ser redirigidos
          dinámicamente para apuntar a objetos diferentes, eso proporciona
          más flexibilidad a sus programas, tal como verá.
        </p>
        <p>
          De momento, es todo lo que debe saber sobre <code class="keyword">struct</code>,
          pero se sentirá mucho más cómodo con ellos (y especialmente
          con sus sucesores mas potentes, las clases) a medida que
          progrese en este libro.
        </p>
      </div>
    </div>
    <div class="navfooter">
      <hr />
      <table width="100%" summary="Navigation footer">
        <tr>
          <td class="navititle" width="1%">
            <a accesskey="p" href="ch03s08.html">
              <img src="./images/prev.png" alt="Anterior" />
            </a>
          </td>
          <td class="navititle" width="40%" align="left">
            <a accesskey="p" href="ch03s08.html">3.8. Creación de tipos compuestos</a>
          </td>
          <td width="10%" align="center">
            <a accesskey="u" href="ch03s08.html">
              <img src="./images/up.png" alt="Subir" />
            </a>
          </td>
          <td class="navititle" width="40%" align="right">
            <a accesskey="n" href="ch03s08s03.html">3.8.3. Programas más claros gracias a <code class="keyword">enum</code></a>
          </td>
          <td class="navititle" width="1%" align="right">
            <a accesskey="n" href="ch03s08s03.html">
              <img src="./images/next.png" alt="Siguiente" />
            </a>
          </td>
        </tr>
        <tr>
          <td valign="top"> </td>
          <td> </td>
          <td width="10%" align="center">
            <a accesskey="h" href="index.html">
              <img src="./images/home.png" alt="Inicio" />
            </a>
          </td>
          <td> </td>
          <td valign="top"> </td>
        </tr>
      </table>
    </div>
  </body>
</html>
