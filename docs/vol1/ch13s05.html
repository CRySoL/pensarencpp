<?xml version="1.0" encoding="ISO-8859-1" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1" />
    <title>13.5. Ejercicios</title>
    <link rel="stylesheet" type="text/css" href="common.css" />
    <link rel="stylesheet" type="text/css" href="chunk.css" />
    <link rel="stylesheet" type="text/css" href="highlight.css" />
    <meta name="generator" content="DocBook XSL Stylesheets V1.76.1" />
    <link rel="home" href="index.html" title="Pensar en C++ (Volumen 1)" />
    <link rel="up" href="C13.html" title="13: Creación dinámica de objetos" />
    <link rel="prev" href="ch13s04.html" title="13.4. Resumen" />
    <link rel="next" href="C14.html" title="14: Herencia y Composición" />
  </head>
  <body>
    <div class="navfooter">
      <hr />
      <table width="100%" summary="Navigation footer">
        <tr>
          <td class="navititle" width="1%">
            <a accesskey="p" href="ch13s04.html">
              <img src="./images/prev.png" alt="Anterior" />
            </a>
          </td>
          <td class="navititle" width="40%" align="left">
            <a accesskey="p" href="ch13s04.html">13.4. Resumen</a>
          </td>
          <td width="10%" align="center">
            <a accesskey="u" href="C13.html">
              <img src="./images/up.png" alt="Subir" />
            </a>
          </td>
          <td class="navititle" width="40%" align="right">
            <a accesskey="n" href="C14.html">14: Herencia y Composición</a>
          </td>
          <td class="navititle" width="1%" align="right">
            <a accesskey="n" href="C14.html">
              <img src="./images/next.png" alt="Siguiente" />
            </a>
          </td>
        </tr>
      </table>
    </div>
    <div class="sect1" title="13.5. Ejercicios">
      <div class="titlepage">
        <div>
          <div>
            <h2 class="title" style="clear: both"><a id="idp7792888"></a>13.5. Ejercicios</h2>
          </div>
        </div>
      </div>
      <p>
      Las soluciones a los ejercicios se pueden encontrar en el
      documento electrónico titulado «The Thinking in C++
      Annotated Solution Guide», disponible por poco dinero
      en <a class="ulink" href="http://www.bruceeckel.com" target="_top">www.BruceEckel.com</a>.
    </p>
      <div class="orderedlist">
        <ol class="orderedlist" type="1">
          <li class="listitem">
            <p>
	  Crear una clase <code class="classname">Counted</code> que contenga un
	  <code class="literal">int id</code> y un <code class="literal">static int
	  count</code>. El constructor por defecto debe empezar con
	  <code class="literal">Counted():id(count++){</code>. También deberá
	  mostrar mensajes con su <code class="varname">id</code>, además de
	  alguno que muestre que se está creando. El destructor debe
	  mostrar que está siendo destruido y su
	  <code class="varname">id</code>. Probar su funcionamiento.
	</p>
          </li>
          <li class="listitem">
            <p>
	  Compruebe que <code class="keyword">new</code> y
	  <code class="keyword">delete</code> llaman siempre a constructores y
	  destructores, creando mediante el uso de
	  <code class="keyword">new</code> un objeto de la clase
	  <code class="classname">Counted</code> del ejercicio 1, y
	  destruyéndolo después con <code class="keyword">delete</code>. Cree y
	  destruya un vector de <code class="classname">Counted</code> en el
	  montículo.
	</p>
          </li>
          <li class="listitem">
            <p>
	  Cree un objeto de la clase <code class="classname">PStash</code>, y
	  llénelo de los objetos del ejercicio 1. Observe lo que sucede
	  cuando el objeto <code class="classname">PStash</code> sale de su
	  ámbito y es llamado su destructor.
	</p>
          </li>
          <li class="listitem">
            <p>
	  Cree un vector de <code class="classname">Counted*</code> y cárguelo
	  con punteros a objetos <code class="classname">Counted</code>. Recorra
	  el vector llamando imprimiendo cada objeto, repita este paso y
	  elimínelos uno a uno.
	</p>
          </li>
          <li class="listitem">
            <p>
	  Repita el ejercicio 4 añadiendo una función miembro
	  <code class="function">f()</code> de <code class="classname">Counted</code> que
	  muestre un mensaje. Recorra el vector llamando a
	  <code class="function">f()</code> para cada objeto del vector.
	</p>
          </li>
          <li class="listitem">
            <p>
	  Repita el ejercicio 5 usando un objeto
	  <code class="classname">PStash</code>.
	</p>
          </li>
          <li class="listitem">
            <p>
	  Repita el ejercicio 5 usando <code class="filename">Stack4.h</code> del
	  capítulo 9.
	</p>
          </li>
          <li class="listitem">
            <p>
	  Cree mediante asignación dinámica un vector de objetos de
	  clase <code class="classname">Counted</code>. Llame a
	  <code class="keyword">delete</code> con el puntero resultante como
	  argumento, sin usar el operador subíndice []. Explique el
	  resultado.
	</p>
          </li>
          <li class="listitem">
            <p>
	  Cree un objeto de clase <code class="classname">Counted</code>
	  mediante <code class="keyword">new</code>, convierta el puntero
	  resultante a <code class="keyword">void*</code> y luego
	  bórrelo. Explique el resultado.
	</p>
          </li>
          <li class="listitem">
            <p>
	  Compile y ejecute el programa
	  <code class="filename">NewHandler.cpp</code> en su ordenador. A partir
	  del número resultante, calcule la cantidad de memoria libre
	  disponible para su programa.
	</p>
          </li>
          <li class="listitem">
            <p>
	  Cree una clase y defina en ella operadores de sobrecarga
	  para <code class="keyword">new</code> y <code class="keyword">delete</code>,
	  para objetos simples y para vectores de objetos. Demuestre
	  que ambas versiones funcionan.
	</p>
          </li>
          <li class="listitem">
            <p>
	  Diseñe un test que le permita evaluar de forma aproximada la
	  mejora en velocidad obtenida en
	  <code class="filename">Framis.cpp</code> con el uso de las versiones
	  adaptadas de <code class="keyword">new</code> y
	  <code class="keyword">delete</code>, respecto de la obtenida con las
	  globales .
	</p>
          </li>
          <li class="listitem">
            <p>
	  Modifique <code class="filename">NoMemory.cpp</code> para que contenga
	  un vector de enteros y realmente obtenga memoria en lugar de
	  disparar <code class="classname">bad_alloc</code>. Establezca un bucle
	  <code class="keyword">while</code> en el cuerpo de
	  <code class="function">main()</code> similar al que existe en
	  <code class="filename">NewHandler.cpp</code> para agotar la
	  memoria. Observe lo que sucede en el caso de que su operador
	  <code class="keyword">new</code> no compruebe el éxito de la asignación
	  de memoria. Añada después esa comprobación a su operador
	  <code class="keyword">new</code> y la llamada a <code class="literal">throw
	  bad_alloc</code>.
	</p>
          </li>
          <li class="listitem">
            <p>
	  Cree una clase y defina un operador <code class="keyword">new</code> de
	  emplazamiento, con un <code class="type">string</code> como segundo
	  argumento.  Defina un vector de <code class="type">string</code>, en
	  el que se almacenará este segundo argumento a cada llamada a
	  <code class="keyword">new</code>.  El operador <code class="keyword">new</code> de
	  emplazamiento asignará bloques de manera normal.  En
	  <code class="function">main()</code>, haga llamadas a este operador
	  <code class="keyword">new</code> pasándole como argumentos cadenas de
	  caracteres que describan las llamadas. Para ello, puede hacer
	  uso de las macros <code class="constant">__FILE__</code> y
	  <code class="constant">__LINE__</code> del preprocesador.
	</p>
          </li>
          <li class="listitem">
            <p>
	  Modifique <code class="filename">ArrayOperatorNew.cpp</code> definiendo
	  un vector estático de <code class="type">Widget*</code> que añada la
	  dirección de cada uno de los objetos
	  <code class="classname">Widget</code> asignados con
	  <code class="keyword">new</code>, y la retire cuando sea liberada
	  mediante <code class="keyword">delete</code>. Puede que necesite buscar
	  información sebre vectores en la documentación de la
	  biblioteca estándar de C++, o en el segundo volumen de este
	  libro que está disponible en la web del autor. Cree una
	  segunda clase a la que llamará
	  <code class="classname">MemoryChecker</code>, que contenga un
	  destructor que muestre el número de punteros a
	  <code class="classname">Widget</code> en su vector. Diseñe un programa
	  con una única instancia global de
	  <code class="classname">MemoryChecker</code>, y en
	  <code class="function">main()</code>, cree y destruya dinámicamente
	  varios objetos y vectores de objetos
	  <code class="classname">Widget</code>. Observe que
	  <code class="classname">MemoryCheck</code> revela fugas de memoria.
	</p>
          </li>
        </ol>
      </div>
    </div>
    <div class="navfooter">
      <hr />
      <table width="100%" summary="Navigation footer">
        <tr>
          <td class="navititle" width="1%">
            <a accesskey="p" href="ch13s04.html">
              <img src="./images/prev.png" alt="Anterior" />
            </a>
          </td>
          <td class="navititle" width="40%" align="left">
            <a accesskey="p" href="ch13s04.html">13.4. Resumen</a>
          </td>
          <td width="10%" align="center">
            <a accesskey="u" href="C13.html">
              <img src="./images/up.png" alt="Subir" />
            </a>
          </td>
          <td class="navititle" width="40%" align="right">
            <a accesskey="n" href="C14.html">14: Herencia y Composición</a>
          </td>
          <td class="navititle" width="1%" align="right">
            <a accesskey="n" href="C14.html">
              <img src="./images/next.png" alt="Siguiente" />
            </a>
          </td>
        </tr>
        <tr>
          <td valign="top"> </td>
          <td> </td>
          <td width="10%" align="center">
            <a accesskey="h" href="index.html">
              <img src="./images/home.png" alt="Inicio" />
            </a>
          </td>
          <td> </td>
          <td valign="top"> </td>
        </tr>
      </table>
    </div>
  </body>
</html>
