<?xml version="1.0" encoding="ISO-8859-1" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1" />
    <title>14: Herencia y Composición</title>
    <link rel="stylesheet" type="text/css" href="common.css" />
    <link rel="stylesheet" type="text/css" href="chunk.css" />
    <link rel="stylesheet" type="text/css" href="highlight.css" />
    <meta name="generator" content="DocBook XSL Stylesheets V1.76.1" />
    <link rel="home" href="index.html" title="Pensar en C++ (Volumen 1)" />
    <link rel="up" href="index.html" title="Pensar en C++ (Volumen 1)" />
    <link rel="prev" href="ch13s05.html" title="13.5. Ejercicios" />
    <link rel="next" href="ch14s02.html" title="14.2. Sintaxis de la herencia" />
  </head>
  <body>
    <div class="navfooter">
      <hr />
      <table width="100%" summary="Navigation footer">
        <tr>
          <td class="navititle" width="1%">
            <a accesskey="p" href="ch13s05.html">
              <img src="./images/prev.png" alt="Anterior" />
            </a>
          </td>
          <td class="navititle" width="40%" align="left">
            <a accesskey="p" href="ch13s05.html">13.5. Ejercicios</a>
          </td>
          <td width="10%" align="center"> </td>
          <td class="navititle" width="40%" align="right">
            <a accesskey="n" href="ch14s02.html">14.2. Sintaxis de la herencia</a>
          </td>
          <td class="navititle" width="1%" align="right">
            <a accesskey="n" href="ch14s02.html">
              <img src="./images/next.png" alt="Siguiente" />
            </a>
          </td>
        </tr>
      </table>
    </div>
    <div class="chapter" title="14: Herencia y Composición">
      <div class="titlepage">
        <div>
          <div>
            <h2 class="title"><a id="C14"></a>14: Herencia y Composición</h2>
          </div>
        </div>
      </div>
      <div class="toc">
        <p>
          <strong>Tabla de contenidos</strong>
        </p>
        <dl>
          <dt>
            <span class="sect1">
              <a href="C14.html#idp7831664">14.1. Sintaxis de la composición</a>
            </span>
          </dt>
          <dt>
            <span class="sect1">
              <a href="ch14s02.html">14.2. Sintaxis de la herencia</a>
            </span>
          </dt>
          <dt>
            <span class="sect1">
              <a href="ch14s03.html">14.3. Lista de inicializadores de un constructor</a>
            </span>
          </dt>
          <dt>
            <span class="sect1">
              <a href="ch14s04.html">14.4. Ocultación de nombres</a>
            </span>
          </dt>
          <dt>
            <span class="sect1">
              <a href="ch14s05.html">14.5. Funciones que no heredan automáticamente</a>
            </span>
          </dt>
          <dt>
            <span class="sect1">
              <a href="ch14s06.html">14.6. Protected</a>
            </span>
          </dt>
          <dt>
            <span class="sect1">
              <a href="ch14s07.html">14.7. Herencia y sobrecarga de operadores</a>
            </span>
          </dt>
          <dt>
            <span class="sect1">
              <a href="ch14s08.html">14.8. Herencia múltiple</a>
            </span>
          </dt>
          <dt>
            <span class="sect1">
              <a href="ch14s09.html">14.9. Desarrollo incremental</a>
            </span>
          </dt>
          <dt>
            <span class="sect1">
              <a href="ch14s10.html">14.10. Upcasting</a>
            </span>
          </dt>
          <dt>
            <span class="sect1">
              <a href="ch14s11.html">14.11. Resumen</a>
            </span>
          </dt>
          <dt>
            <span class="sect1">
              <a href="ch14s12.html">14.12. Ejercicios</a>
            </span>
          </dt>
        </dl>
      </div>
      <div class="highlights">
        <p>
      Una de las características más importantes acerca de C++ es la
      reutilización de código. Pero para ser revolucionario, necesita
      ser capaz de hacer algo más que copiar código y modificarlo.
    </p>
      </div>
      <p>
    Este es un enfoque de C y no fue demasiado bien. Como en la mayoría
    de los casos en C++, la solución gira alrededor de la clase. Se
    reutiliza código creando nuevas clases, pero en vez de crearlas
    desde la nada, utilizará clases existentes que alguien ha realizado
    y comprobado que funcionan correctamente.
  </p>
      <p>
    La clave consiste en utilizar estas clases sin modificarlas. En este
    capítulo, aprenderá los dos modos de hacerlo. El primero es bastante
    directo: simplemente cree objetos de la clase existente dentro de la
    nueva clase. A esto se le llama composición porqué la nueva clase
    esta compuesta por objetos de clases ya existentes.
  </p>
      <p>
    La segunda forma es mucho más sutil. Crear la nueva clase como un
    tipo de una clase existente. Literalmente se toma la forma de la
    clase existente y se añade código, pero sin modificar la clase ya
    existente. A este hecho mágico se le llama herencia, y la mayoría
    del trabajo es realizado por el compilador. La herencia es uno de
    los pilares de la programación orientada a objetos y tiene
    extensiones adicionales que serán exploradas en el capítulo 15.
  </p>
      <p>
    Esto es, resulta que gran parte de la sintaxis y el comportamiento
    son similares tanto en la composición como en la herencia (lo cual
    tiene sentido; ambas son dos formas de crear nuevos tipos utilizando
    tipos ya existentes). En este capítulo, aprenderá acerca de los
    mecanismos para la reutilización de código.
  </p>
      <div class="sect1" title="14.1. Sintaxis de la composición">
        <div class="titlepage">
          <div>
            <div>
              <h2 class="title" style="clear: both"><a id="idp7831664"></a>14.1. Sintaxis de la composición</h2>
            </div>
          </div>
        </div>
        <p>
      Realmente, ha utilizado la composición a lo largo de la creación
      de una clase. Ha estado construyendo clases principalmente con
      tipos predefinidos (y en ocasiones cadenas). Por esto, resulta
      fácil usar la composición con tipos definidos por el usuario.
    </p>
        <p>
      Considere la siguiente clase:
    </p>
        <div class="example">
          <a id="idp7833064"></a>
          <div class="example-contents">
            <pre class="programlisting">
<span class="hl slc">//: C14:Useful.h</span>
<span class="hl slc">// A class to reuse</span>
<span class="hl ppc">#ifndef USEFUL_H</span>
<span class="hl ppc">#define USEFUL_H</span>

<span class="hl kwc">class</span> X <span class="hl opt">{</span>
  <span class="hl kwb">int</span> i<span class="hl opt">;</span>
<span class="hl kwc">public</span><span class="hl opt">:</span>
  <span class="hl kwd">X</span><span class="hl opt">() {</span> i <span class="hl opt">=</span> <span class="hl num">0</span><span class="hl opt">; }</span>
  <span class="hl kwb">void</span> <span class="hl kwd">set</span><span class="hl opt">(</span><span class="hl kwb">int</span> ii<span class="hl opt">) {</span> i <span class="hl opt">=</span> ii<span class="hl opt">; }</span>
  <span class="hl kwb">int</span> <span class="hl kwd">read</span><span class="hl opt">()</span> <span class="hl kwb">const</span> <span class="hl opt">{</span> <span class="hl kwa">return</span> i<span class="hl opt">; }</span>
  <span class="hl kwb">int</span> <span class="hl kwd">permute</span><span class="hl opt">() {</span> <span class="hl kwa">return</span> i <span class="hl opt">=</span> i <span class="hl opt">*</span> <span class="hl num">47</span><span class="hl opt">; }</span>
<span class="hl opt">};</span>
<span class="hl ppc">#endif</span> <span class="hl slc">// USEFUL_H ///:~</span><span class="hl ppc"></span>
</pre>
          </div>
          <p class="title">
            <strong>Listado 14.1. C14/Useful.h</strong>
          </p>
        </div>
        <br class="example-break" />
        <p>
      En esta clase los miembros son privados, y entonces, es
      completamente seguro declarar un objeto del tipo X público en la
      nueva clase, y por ello, permitir una interfaz directa:
    </p>
        <div class="example">
          <a id="idp7834808"></a>
          <div class="example-contents">
            <pre class="programlisting">
<span class="hl slc">//: C14:Composition.cpp</span>
<span class="hl slc">// Reuse code with composition</span>
<span class="hl ppc">#include</span> <span class="hl pps">&quot;Useful.h&quot;</span><span class="hl ppc"></span>

<span class="hl kwc">class</span> Y <span class="hl opt">{</span>
  <span class="hl kwb">int</span> i<span class="hl opt">;</span>
<span class="hl kwc">public</span><span class="hl opt">:</span>
  X x<span class="hl opt">;</span> <span class="hl slc">// Embedded object</span>
  <span class="hl kwd">Y</span><span class="hl opt">() {</span> i <span class="hl opt">=</span> <span class="hl num">0</span><span class="hl opt">; }</span>
  <span class="hl kwb">void</span> <span class="hl kwd">f</span><span class="hl opt">(</span><span class="hl kwb">int</span> ii<span class="hl opt">) {</span> i <span class="hl opt">=</span> ii<span class="hl opt">; }</span>
  <span class="hl kwb">int</span> <span class="hl kwd">g</span><span class="hl opt">()</span> <span class="hl kwb">const</span> <span class="hl opt">{</span> <span class="hl kwa">return</span> i<span class="hl opt">; }</span>
<span class="hl opt">};</span>

<span class="hl kwb">int</span> <span class="hl kwd">main</span><span class="hl opt">() {</span>
  Y y<span class="hl opt">;</span>
  y<span class="hl opt">.</span><span class="hl kwd">f</span><span class="hl opt">(</span><span class="hl num">47</span><span class="hl opt">);</span>
  y<span class="hl opt">.</span>x<span class="hl opt">.</span><span class="hl kwd">set</span><span class="hl opt">(</span><span class="hl num">37</span><span class="hl opt">);</span> <span class="hl slc">// Access the embedded object</span>
<span class="hl opt">}</span> <span class="hl slc">///:~</span>
</pre>
          </div>
          <p class="title">
            <strong>Listado 14.2. C14/Composition.cpp</strong>
          </p>
        </div>
        <br class="example-break" />
        <p>
      Para acceder a las funciones miembro alojadas en el objeto
      (referido como subobjeto) simplemente requiere otra selección del
      miembro.
    </p>
        <p>
      Es habitual hacer privado el objeto alojado, y por ello, formar
      parte de la capa de implementación (lo que significa que es
      posible cambiar la implementación si se desea). La interfaz de
      funciones de la nueva clase implica el uso del objeto alojado,
      pero no necesariamente imita a la interfaz del objeto.
    </p>
        <div class="example">
          <a id="idp7837408"></a>
          <div class="example-contents">
            <pre class="programlisting">
<span class="hl slc">//: C14:Composition2.cpp</span>
<span class="hl slc">// Private embedded objects</span>
<span class="hl ppc">#include</span> <span class="hl pps">&quot;Useful.h&quot;</span><span class="hl ppc"></span>

<span class="hl kwc">class</span> Y <span class="hl opt">{</span>
  <span class="hl kwb">int</span> i<span class="hl opt">;</span>
  X x<span class="hl opt">;</span> <span class="hl slc">// Embedded object</span>
<span class="hl kwc">public</span><span class="hl opt">:</span>
  <span class="hl kwd">Y</span><span class="hl opt">() {</span> i <span class="hl opt">=</span> <span class="hl num">0</span><span class="hl opt">; }</span>
  <span class="hl kwb">void</span> <span class="hl kwd">f</span><span class="hl opt">(</span><span class="hl kwb">int</span> ii<span class="hl opt">) {</span> i <span class="hl opt">=</span> ii<span class="hl opt">;</span> x<span class="hl opt">.</span><span class="hl kwd">set</span><span class="hl opt">(</span>ii<span class="hl opt">); }</span>
  <span class="hl kwb">int</span> <span class="hl kwd">g</span><span class="hl opt">()</span> <span class="hl kwb">const</span> <span class="hl opt">{</span> <span class="hl kwa">return</span> i <span class="hl opt">*</span> x<span class="hl opt">.</span><span class="hl kwd">read</span><span class="hl opt">(); }</span>
  <span class="hl kwb">void</span> <span class="hl kwd">permute</span><span class="hl opt">() {</span> x<span class="hl opt">.</span><span class="hl kwd">permute</span><span class="hl opt">(); }</span>
<span class="hl opt">};</span>

<span class="hl kwb">int</span> <span class="hl kwd">main</span><span class="hl opt">() {</span>
  Y y<span class="hl opt">;</span>
  y<span class="hl opt">.</span><span class="hl kwd">f</span><span class="hl opt">(</span><span class="hl num">47</span><span class="hl opt">);</span>
  y<span class="hl opt">.</span><span class="hl kwd">permute</span><span class="hl opt">();</span>
<span class="hl opt">}</span> <span class="hl slc">///:~</span>
</pre>
          </div>
          <p class="title">
            <strong>Listado 14.3. C14/Composition2.cpp</strong>
          </p>
        </div>
        <br class="example-break" />
        <p>
      Aquí, la función permute() se ha añadido a la interfaz de la
      clase, pero el resto funciones de X son utilizadas dentro de los
      miembros de Y.
    </p>
      </div>
    </div>
    <div class="navfooter">
      <hr />
      <table width="100%" summary="Navigation footer">
        <tr>
          <td class="navititle" width="1%">
            <a accesskey="p" href="ch13s05.html">
              <img src="./images/prev.png" alt="Anterior" />
            </a>
          </td>
          <td class="navititle" width="40%" align="left">
            <a accesskey="p" href="ch13s05.html">13.5. Ejercicios</a>
          </td>
          <td width="10%" align="center"> </td>
          <td class="navititle" width="40%" align="right">
            <a accesskey="n" href="ch14s02.html">14.2. Sintaxis de la herencia</a>
          </td>
          <td class="navititle" width="1%" align="right">
            <a accesskey="n" href="ch14s02.html">
              <img src="./images/next.png" alt="Siguiente" />
            </a>
          </td>
        </tr>
        <tr>
          <td valign="top"> </td>
          <td> </td>
          <td width="10%" align="center">
            <a accesskey="h" href="index.html">
              <img src="./images/home.png" alt="Inicio" />
            </a>
          </td>
          <td> </td>
          <td valign="top"> </td>
        </tr>
      </table>
    </div>
  </body>
</html>
