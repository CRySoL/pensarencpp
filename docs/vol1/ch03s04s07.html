<?xml version="1.0" encoding="ISO-8859-1" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1" />
    <title>3.4.7. Punteros y Referencias como modificadores</title>
    <link rel="stylesheet" type="text/css" href="common.css" />
    <link rel="stylesheet" type="text/css" href="chunk.css" />
    <link rel="stylesheet" type="text/css" href="highlight.css" />
    <meta name="generator" content="DocBook XSL Stylesheets V1.76.1" />
    <link rel="home" href="index.html" title="Pensar en C++ (Volumen 1)" />
    <link rel="up" href="ch03s04.html" title="3.4. Introducción a los tipos de datos" />
    <link rel="prev" href="ch03s04s06.html" title="3.4.6. Introducción a las referencias de C++" />
    <link rel="next" href="ch03s05.html" title="3.5. Alcance" />
  </head>
  <body>
    <div class="navfooter">
      <hr />
      <table width="100%" summary="Navigation footer">
        <tr>
          <td class="navititle" width="1%">
            <a accesskey="p" href="ch03s04s06.html">
              <img src="./images/prev.png" alt="Anterior" />
            </a>
          </td>
          <td class="navititle" width="40%" align="left">
            <a accesskey="p" href="ch03s04s06.html">3.4.6. Introducción a las referencias de C++</a>
          </td>
          <td width="10%" align="center">
            <a accesskey="u" href="ch03s04.html">
              <img src="./images/up.png" alt="Subir" />
            </a>
          </td>
          <td class="navititle" width="40%" align="right">
            <a accesskey="n" href="ch03s05.html">3.5. Alcance</a>
          </td>
          <td class="navititle" width="1%" align="right">
            <a accesskey="n" href="ch03s05.html">
              <img src="./images/next.png" alt="Siguiente" />
            </a>
          </td>
        </tr>
      </table>
    </div>
    <div class="sect2" title="3.4.7. Punteros y Referencias como modificadores">
      <div class="titlepage">
        <div>
          <div>
            <h3 class="title"><a id="idp4503584"></a>3.4.7.  Punteros y Referencias como modificadores </h3>
          </div>
        </div>
      </div>
      <p>
	Hasta ahora, se han visto los tipos básicos de datos
	<code class="type">char</code>, <code class="type">int</code>, <code class="type">float</code>, y
	<code class="type">double</code>, junto con los especificadores
	<code class="type">signed</code>, <code class="type">unsigned</code>, <code class="type">short</code>,
	y <code class="type">long</code>, que se pueden utilizar con los tipos
	básicos de datos en casi cualquier combinación. Ahora hemos
	añadido los punteros y las referencias, que son lo ortogonal a
	los tipos básicos de datos y los especificadores, de modo que
	las combinaciones posibles se acaban de triplicar:
      </p>
      <div class="example">
        <a id="idp4506424"></a>
        <div class="example-contents">
          <pre class="programlisting">
<span class="hl slc">//: C03:AllDefinitions.cpp</span>
<span class="hl slc">// All possible combinations of basic data types, </span>
<span class="hl slc">// specifiers, pointers and references</span>
<span class="hl ppc">#include &lt;iostream&gt;</span>
<span class="hl kwa">using namespace</span> std<span class="hl opt">;</span>

<span class="hl kwb">void</span> <span class="hl kwd">f1</span><span class="hl opt">(</span><span class="hl kwb">char</span> c<span class="hl opt">,</span> <span class="hl kwb">int</span> i<span class="hl opt">,</span> <span class="hl kwb">float</span> f<span class="hl opt">,</span> <span class="hl kwb">double</span> d<span class="hl opt">);</span>
<span class="hl kwb">void</span> <span class="hl kwd">f2</span><span class="hl opt">(</span><span class="hl kwb">short int</span> si<span class="hl opt">,</span> <span class="hl kwb">long int</span> li<span class="hl opt">,</span> <span class="hl kwb">long double</span> ld<span class="hl opt">);</span>
<span class="hl kwb">void</span> <span class="hl kwd">f3</span><span class="hl opt">(</span><span class="hl kwb">unsigned char</span> uc<span class="hl opt">,</span> <span class="hl kwb">unsigned int</span> ui<span class="hl opt">,</span> 
  <span class="hl kwb">unsigned short int</span> usi<span class="hl opt">,</span> <span class="hl kwb">unsigned long int</span> uli<span class="hl opt">);</span>
<span class="hl kwb">void</span> <span class="hl kwd">f4</span><span class="hl opt">(</span><span class="hl kwb">char</span><span class="hl opt">*</span> cp<span class="hl opt">,</span> <span class="hl kwb">int</span><span class="hl opt">*</span> ip<span class="hl opt">,</span> <span class="hl kwb">float</span><span class="hl opt">*</span> fp<span class="hl opt">,</span> <span class="hl kwb">double</span><span class="hl opt">*</span> dp<span class="hl opt">);</span>
<span class="hl kwb">void</span> <span class="hl kwd">f5</span><span class="hl opt">(</span><span class="hl kwb">short int</span><span class="hl opt">*</span> sip<span class="hl opt">,</span> <span class="hl kwb">long int</span><span class="hl opt">*</span> lip<span class="hl opt">,</span> 
  <span class="hl kwb">long double</span><span class="hl opt">*</span> ldp<span class="hl opt">);</span>
<span class="hl kwb">void</span> <span class="hl kwd">f6</span><span class="hl opt">(</span><span class="hl kwb">unsigned char</span><span class="hl opt">*</span> ucp<span class="hl opt">,</span> <span class="hl kwb">unsigned int</span><span class="hl opt">*</span> uip<span class="hl opt">,</span> 
  <span class="hl kwb">unsigned short int</span><span class="hl opt">*</span> usip<span class="hl opt">,</span> 
  <span class="hl kwb">unsigned long int</span><span class="hl opt">*</span> ulip<span class="hl opt">);</span>
<span class="hl kwb">void</span> <span class="hl kwd">f7</span><span class="hl opt">(</span><span class="hl kwb">char</span><span class="hl opt">&amp;</span> cr<span class="hl opt">,</span> <span class="hl kwb">int</span><span class="hl opt">&amp;</span> ir<span class="hl opt">,</span> <span class="hl kwb">float</span><span class="hl opt">&amp;</span> fr<span class="hl opt">,</span> <span class="hl kwb">double</span><span class="hl opt">&amp;</span> dr<span class="hl opt">);</span>
<span class="hl kwb">void</span> <span class="hl kwd">f8</span><span class="hl opt">(</span><span class="hl kwb">short int</span><span class="hl opt">&amp;</span> sir<span class="hl opt">,</span> <span class="hl kwb">long int</span><span class="hl opt">&amp;</span> lir<span class="hl opt">,</span> 
  <span class="hl kwb">long double</span><span class="hl opt">&amp;</span> ldr<span class="hl opt">);</span>
<span class="hl kwb">void</span> <span class="hl kwd">f9</span><span class="hl opt">(</span><span class="hl kwb">unsigned char</span><span class="hl opt">&amp;</span> ucr<span class="hl opt">,</span> <span class="hl kwb">unsigned int</span><span class="hl opt">&amp;</span> uir<span class="hl opt">,</span> 
  <span class="hl kwb">unsigned short int</span><span class="hl opt">&amp;</span> usir<span class="hl opt">,</span> 
  <span class="hl kwb">unsigned long int</span><span class="hl opt">&amp;</span> ulir<span class="hl opt">);</span>

<span class="hl kwb">int</span> <span class="hl kwd">main</span><span class="hl opt">() {}</span> <span class="hl slc">///:~</span>
</pre>
        </div>
        <p class="title">
          <strong>Listado 3.18. C03/AllDefinitions.cpp</strong>
        </p>
      </div>
      <br class="example-break" />
      <p>
	Los punteros y las referencias entran en juego también cuando se
	pasan objetos dentro y fuera de las funciones; aprenderá sobre
	ello en un capítulo posterior.
      </p>
      <p>
	Hay otro tipo que funciona con punteros: <code class="type">void</code>. Si
	se establece que un puntero es un <code class="type">void*</code>, significa
	que cualquier tipo de dirección se puede asignar a ese puntero
	(en cambio si tiene un <code class="type">int*</code>, sólo puede asignar la
	dirección de una variable <code class="type">int</code> a ese puntero). Por
	ejemplo:
      </p>
      <div class="example">
        <a id="idp4510664"></a>
        <div class="example-contents">
          <pre class="programlisting">
<span class="hl slc">//: C03:VoidPointer.cpp</span>
<span class="hl kwb">int</span> <span class="hl kwd">main</span><span class="hl opt">() {</span>
  <span class="hl kwb">void</span><span class="hl opt">*</span> vp<span class="hl opt">;</span>
  <span class="hl kwb">char</span> c<span class="hl opt">;</span>
  <span class="hl kwb">int</span> i<span class="hl opt">;</span>
  <span class="hl kwb">float</span> f<span class="hl opt">;</span>
  <span class="hl kwb">double</span> d<span class="hl opt">;</span>
  <span class="hl slc">// The address of ANY type can be</span>
  <span class="hl slc">// assigned to a void pointer:</span>
  vp <span class="hl opt">= &amp;</span>c<span class="hl opt">;</span>
  vp <span class="hl opt">= &amp;</span>i<span class="hl opt">;</span>
  vp <span class="hl opt">= &amp;</span>f<span class="hl opt">;</span>
  vp <span class="hl opt">= &amp;</span>d<span class="hl opt">;</span>
<span class="hl opt">}</span> <span class="hl slc">///:~</span>
</pre>
        </div>
        <p class="title">
          <strong>Listado 3.19. C03/VoidPointer.cpp</strong>
        </p>
      </div>
      <br class="example-break" />
      <p>
	Una vez que se asigna a un <code class="type">void*</code> se pierde
	cualquier información sobre el tipo de la variables. Esto
	significa que antes de que se pueda utilizar el puntero, se debe
	moldear al tipo correcto:
      </p>
      <div class="example">
        <a id="idp4512624"></a>
        <div class="example-contents">
          <pre class="programlisting">
<span class="hl slc">//: C03:CastFromVoidPointer.cpp</span>
<span class="hl kwb">int</span> <span class="hl kwd">main</span><span class="hl opt">() {</span>
  <span class="hl kwb">int</span> i <span class="hl opt">=</span> <span class="hl num">99</span><span class="hl opt">;</span>
  <span class="hl kwb">void</span><span class="hl opt">*</span> vp <span class="hl opt">= &amp;</span>i<span class="hl opt">;</span>
  <span class="hl slc">// Can't dereference a void pointer:</span>
  <span class="hl slc">// *vp = 3; // Compile-time error</span>
  <span class="hl slc">// Must cast back to int before dereferencing:</span>
  <span class="hl opt">*((</span><span class="hl kwb">int</span><span class="hl opt">*)</span>vp<span class="hl opt">) =</span> <span class="hl num">3</span><span class="hl opt">;</span>
<span class="hl opt">}</span> <span class="hl slc">///:~</span>
</pre>
        </div>
        <p class="title">
          <strong>Listado 3.20. C03/CastFromVoidPointer.cpp</strong>
        </p>
      </div>
      <br class="example-break" />
      <p>
	El molde <code class="code">(int*)vp</code> toma el <code class="type">void*</code> y le
	dice al compilador que lo trate como un <code class="type">int*</code>, y de
	ese modo se puede dereferenciar correctamente.  Puede observar
	que esta sintaxis es horrible, y lo es, pero es peor que eso -
	el <code class="type">void*</code> introduce un agujero en el sistema de
	tipos del lenguaje.  Eso significa, que permite, o incluso
	promueve, el tratamiento de un tipo como si fuera otro tipo. En
	el ejemplo anterior, se trata un <code class="type">int</code> como un
	<code class="type">int</code> mediante el moldeado de <code class="varname">vp</code> a
	<code class="type">int*</code>, pero no hay nada que indique que no se lo
	puede moldear a <code class="type">char*</code> o <code class="type">double*</code>, lo
	que modificaría una cantidad diferente de espacio que ha sido
	asignada al <code class="type">int</code>, lo que posiblemente provocará que
	el programa falle.. En general, los punteros <code class="type">void</code>
	deberían ser evitados, y utilizados únicamente en raras
	ocasiones, que no se podrán considerar hasta bastante más
	adelante en el libro.
      </p>
      <p>
	No se puede tener una referencia <code class="type">void</code>, por razones
	que se explicarán en el capítulo 11.
      </p>
    </div>
    <div class="navfooter">
      <hr />
      <table width="100%" summary="Navigation footer">
        <tr>
          <td class="navititle" width="1%">
            <a accesskey="p" href="ch03s04s06.html">
              <img src="./images/prev.png" alt="Anterior" />
            </a>
          </td>
          <td class="navititle" width="40%" align="left">
            <a accesskey="p" href="ch03s04s06.html">3.4.6. Introducción a las referencias de C++</a>
          </td>
          <td width="10%" align="center">
            <a accesskey="u" href="ch03s04.html">
              <img src="./images/up.png" alt="Subir" />
            </a>
          </td>
          <td class="navititle" width="40%" align="right">
            <a accesskey="n" href="ch03s05.html">3.5. Alcance</a>
          </td>
          <td class="navititle" width="1%" align="right">
            <a accesskey="n" href="ch03s05.html">
              <img src="./images/next.png" alt="Siguiente" />
            </a>
          </td>
        </tr>
        <tr>
          <td valign="top"> </td>
          <td> </td>
          <td width="10%" align="center">
            <a accesskey="h" href="index.html">
              <img src="./images/home.png" alt="Inicio" />
            </a>
          </td>
          <td> </td>
          <td valign="top"> </td>
        </tr>
      </table>
    </div>
  </body>
</html>
