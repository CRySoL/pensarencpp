<?xml version="1.0" encoding="ISO-8859-1" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1" />
    <title>12.3.2. Operadores binarios</title>
    <link rel="stylesheet" type="text/css" href="common.css" />
    <link rel="stylesheet" type="text/css" href="chunk.css" />
    <link rel="stylesheet" type="text/css" href="highlight.css" />
    <meta name="generator" content="DocBook XSL Stylesheets V1.76.1" />
    <link rel="home" href="index.html" title="Pensar en C++ (Volumen 1)" />
    <link rel="up" href="ch12s03.html" title="12.3. Operadores sobrecargables" />
    <link rel="prev" href="ch12s03.html" title="12.3. Operadores sobrecargables" />
    <link rel="next" href="ch12s03s03.html" title="12.3.3. Argumentos y valores de retorno" />
  </head>
  <body>
    <div class="navfooter">
      <hr />
      <table width="100%" summary="Navigation footer">
        <tr>
          <td class="navititle" width="1%">
            <a accesskey="p" href="ch12s03.html">
              <img src="./images/prev.png" alt="Anterior" />
            </a>
          </td>
          <td class="navititle" width="40%" align="left">
            <a accesskey="p" href="ch12s03.html">12.3. Operadores sobrecargables </a>
          </td>
          <td width="10%" align="center">
            <a accesskey="u" href="ch12s03.html">
              <img src="./images/up.png" alt="Subir" />
            </a>
          </td>
          <td class="navititle" width="40%" align="right">
            <a accesskey="n" href="ch12s03s03.html">12.3.3. Argumentos y valores de retorno</a>
          </td>
          <td class="navititle" width="1%" align="right">
            <a accesskey="n" href="ch12s03s03.html">
              <img src="./images/next.png" alt="Siguiente" />
            </a>
          </td>
        </tr>
      </table>
    </div>
    <div class="sect2" title="12.3.2. Operadores binarios">
      <div class="titlepage">
        <div>
          <div>
            <h3 class="title"><a id="idp7146144"></a>12.3.2. Operadores binarios</h3>
          </div>
        </div>
      </div>
      <p>
		Los siguientes listados repiten el ejemplo de
		<code class="filename">OverloadingUnaryOperators.cpp</code> para los operadores binarios
		presentándole un ejemplo de todos los operadores que pueda querer sobrecargar. De
		nuevo se muestran ambas versiones, la global y la de método.
      </p>
      <div class="example">
        <a id="idp7147480"></a>
        <div class="example-contents">
          <pre class="programlisting">
<span class="hl slc">//: C12:Integer.h</span>
<span class="hl slc">// Non-member overloaded operators</span>
<span class="hl ppc">#ifndef INTEGER_H</span>
<span class="hl ppc">#define INTEGER_H</span>
<span class="hl ppc">#include &lt;iostream&gt;</span>

<span class="hl slc">// Non-member functions:</span>
<span class="hl kwc">class</span> Integer <span class="hl opt">{</span> 
  <span class="hl kwb">long</span> i<span class="hl opt">;</span>
<span class="hl kwc">public</span><span class="hl opt">:</span>
  <span class="hl kwd">Integer</span><span class="hl opt">(</span><span class="hl kwb">long</span> ll <span class="hl opt">=</span> <span class="hl num">0</span><span class="hl opt">) :</span> <span class="hl kwd">i</span><span class="hl opt">(</span>ll<span class="hl opt">) {}</span>
  <span class="hl slc">// Operators that create new, modified value:</span>
  <span class="hl kwc">friend</span> <span class="hl kwb">const</span> Integer
    <span class="hl kwc">operator</span><span class="hl opt">+(</span><span class="hl kwb">const</span> Integer<span class="hl opt">&amp;</span> left<span class="hl opt">,</span>
              <span class="hl kwb">const</span> Integer<span class="hl opt">&amp;</span> right<span class="hl opt">);</span>
  <span class="hl kwc">friend</span> <span class="hl kwb">const</span> Integer
    <span class="hl kwc">operator</span><span class="hl opt">-(</span><span class="hl kwb">const</span> Integer<span class="hl opt">&amp;</span> left<span class="hl opt">,</span>
              <span class="hl kwb">const</span> Integer<span class="hl opt">&amp;</span> right<span class="hl opt">);</span>
  <span class="hl kwc">friend</span> <span class="hl kwb">const</span> Integer
    <span class="hl kwc">operator</span><span class="hl opt">*(</span><span class="hl kwb">const</span> Integer<span class="hl opt">&amp;</span> left<span class="hl opt">,</span>
              <span class="hl kwb">const</span> Integer<span class="hl opt">&amp;</span> right<span class="hl opt">);</span>
  <span class="hl kwc">friend</span> <span class="hl kwb">const</span> Integer
    <span class="hl kwc">operator</span><span class="hl opt">/(</span><span class="hl kwb">const</span> Integer<span class="hl opt">&amp;</span> left<span class="hl opt">,</span>
              <span class="hl kwb">const</span> Integer<span class="hl opt">&amp;</span> right<span class="hl opt">);</span>
  <span class="hl kwc">friend</span> <span class="hl kwb">const</span> Integer
    <span class="hl kwc">operator</span><span class="hl opt">%(</span><span class="hl kwb">const</span> Integer<span class="hl opt">&amp;</span> left<span class="hl opt">,</span>
              <span class="hl kwb">const</span> Integer<span class="hl opt">&amp;</span> right<span class="hl opt">);</span>
  <span class="hl kwc">friend</span> <span class="hl kwb">const</span> Integer
    <span class="hl kwc">operator</span>^<span class="hl opt">(</span><span class="hl kwb">const</span> Integer<span class="hl opt">&amp;</span> left<span class="hl opt">,</span>
              <span class="hl kwb">const</span> Integer<span class="hl opt">&amp;</span> right<span class="hl opt">);</span>
  <span class="hl kwc">friend</span> <span class="hl kwb">const</span> Integer
    <span class="hl kwc">operator</span><span class="hl opt">&amp;(</span><span class="hl kwb">const</span> Integer<span class="hl opt">&amp;</span> left<span class="hl opt">,</span>
              <span class="hl kwb">const</span> Integer<span class="hl opt">&amp;</span> right<span class="hl opt">);</span>
  <span class="hl kwc">friend</span> <span class="hl kwb">const</span> Integer
    <span class="hl kwc">operator</span><span class="hl opt">|(</span><span class="hl kwb">const</span> Integer<span class="hl opt">&amp;</span> left<span class="hl opt">,</span>
              <span class="hl kwb">const</span> Integer<span class="hl opt">&amp;</span> right<span class="hl opt">);</span>
  <span class="hl kwc">friend</span> <span class="hl kwb">const</span> Integer
    <span class="hl kwc">operator</span><span class="hl opt">&lt;&lt;(</span><span class="hl kwb">const</span> Integer<span class="hl opt">&amp;</span> left<span class="hl opt">,</span>
               <span class="hl kwb">const</span> Integer<span class="hl opt">&amp;</span> right<span class="hl opt">);</span>
  <span class="hl kwc">friend</span> <span class="hl kwb">const</span> Integer
    <span class="hl kwc">operator</span><span class="hl opt">&gt;&gt;(</span><span class="hl kwb">const</span> Integer<span class="hl opt">&amp;</span> left<span class="hl opt">,</span>
               <span class="hl kwb">const</span> Integer<span class="hl opt">&amp;</span> right<span class="hl opt">);</span>
  <span class="hl slc">// Assignments modify &amp; return lvalue:</span>
  <span class="hl kwc">friend</span> Integer<span class="hl opt">&amp;</span>
    <span class="hl kwc">operator</span><span class="hl opt">+=(</span>Integer<span class="hl opt">&amp;</span> left<span class="hl opt">,</span>
               <span class="hl kwb">const</span> Integer<span class="hl opt">&amp;</span> right<span class="hl opt">);</span>
  <span class="hl kwc">friend</span> Integer<span class="hl opt">&amp;</span>
    <span class="hl kwc">operator</span><span class="hl opt">-=(</span>Integer<span class="hl opt">&amp;</span> left<span class="hl opt">,</span>
               <span class="hl kwb">const</span> Integer<span class="hl opt">&amp;</span> right<span class="hl opt">);</span>
  <span class="hl kwc">friend</span> Integer<span class="hl opt">&amp;</span>
    <span class="hl kwc">operator</span><span class="hl opt">*=(</span>Integer<span class="hl opt">&amp;</span> left<span class="hl opt">,</span>
               <span class="hl kwb">const</span> Integer<span class="hl opt">&amp;</span> right<span class="hl opt">);</span>
  <span class="hl kwc">friend</span> Integer<span class="hl opt">&amp;</span>
    <span class="hl kwc">operator</span><span class="hl opt">/=(</span>Integer<span class="hl opt">&amp;</span> left<span class="hl opt">,</span>
               <span class="hl kwb">const</span> Integer<span class="hl opt">&amp;</span> right<span class="hl opt">);</span>
  <span class="hl kwc">friend</span> Integer<span class="hl opt">&amp;</span>
    <span class="hl kwc">operator</span><span class="hl opt">%=(</span>Integer<span class="hl opt">&amp;</span> left<span class="hl opt">,</span>
               <span class="hl kwb">const</span> Integer<span class="hl opt">&amp;</span> right<span class="hl opt">);</span>
  <span class="hl kwc">friend</span> Integer<span class="hl opt">&amp;</span>
    <span class="hl kwc">operator</span>^<span class="hl opt">=(</span>Integer<span class="hl opt">&amp;</span> left<span class="hl opt">,</span>
               <span class="hl kwb">const</span> Integer<span class="hl opt">&amp;</span> right<span class="hl opt">);</span>
  <span class="hl kwc">friend</span> Integer<span class="hl opt">&amp;</span>
    <span class="hl kwc">operator</span><span class="hl opt">&amp;=(</span>Integer<span class="hl opt">&amp;</span> left<span class="hl opt">,</span>
               <span class="hl kwb">const</span> Integer<span class="hl opt">&amp;</span> right<span class="hl opt">);</span>
  <span class="hl kwc">friend</span> Integer<span class="hl opt">&amp;</span>
    <span class="hl kwc">operator</span><span class="hl opt">|=(</span>Integer<span class="hl opt">&amp;</span> left<span class="hl opt">,</span>
               <span class="hl kwb">const</span> Integer<span class="hl opt">&amp;</span> right<span class="hl opt">);</span>
  <span class="hl kwc">friend</span> Integer<span class="hl opt">&amp;</span>
    <span class="hl kwc">operator</span><span class="hl opt">&gt;&gt;=(</span>Integer<span class="hl opt">&amp;</span> left<span class="hl opt">,</span>
                <span class="hl kwb">const</span> Integer<span class="hl opt">&amp;</span> right<span class="hl opt">);</span>
  <span class="hl kwc">friend</span> Integer<span class="hl opt">&amp;</span>
    <span class="hl kwc">operator</span><span class="hl opt">&lt;&lt;=(</span>Integer<span class="hl opt">&amp;</span> left<span class="hl opt">,</span>
                <span class="hl kwb">const</span> Integer<span class="hl opt">&amp;</span> right<span class="hl opt">);</span>
  <span class="hl slc">// Conditional operators return true/false:</span>
  <span class="hl kwc">friend</span> <span class="hl kwb">int</span>
    <span class="hl kwc">operator</span><span class="hl opt">==(</span><span class="hl kwb">const</span> Integer<span class="hl opt">&amp;</span> left<span class="hl opt">,</span>
               <span class="hl kwb">const</span> Integer<span class="hl opt">&amp;</span> right<span class="hl opt">);</span>
  <span class="hl kwc">friend</span> <span class="hl kwb">int</span>
    <span class="hl kwc">operator</span><span class="hl opt">!=(</span><span class="hl kwb">const</span> Integer<span class="hl opt">&amp;</span> left<span class="hl opt">,</span>
               <span class="hl kwb">const</span> Integer<span class="hl opt">&amp;</span> right<span class="hl opt">);</span>
  <span class="hl kwc">friend</span> <span class="hl kwb">int</span>
    <span class="hl kwc">operator</span><span class="hl opt">&lt;(</span><span class="hl kwb">const</span> Integer<span class="hl opt">&amp;</span> left<span class="hl opt">,</span>
              <span class="hl kwb">const</span> Integer<span class="hl opt">&amp;</span> right<span class="hl opt">);</span>
  <span class="hl kwc">friend</span> <span class="hl kwb">int</span>
    <span class="hl kwc">operator</span><span class="hl opt">&gt;(</span><span class="hl kwb">const</span> Integer<span class="hl opt">&amp;</span> left<span class="hl opt">,</span>
              <span class="hl kwb">const</span> Integer<span class="hl opt">&amp;</span> right<span class="hl opt">);</span>
  <span class="hl kwc">friend</span> <span class="hl kwb">int</span>
    <span class="hl kwc">operator</span><span class="hl opt">&lt;=(</span><span class="hl kwb">const</span> Integer<span class="hl opt">&amp;</span> left<span class="hl opt">,</span>
               <span class="hl kwb">const</span> Integer<span class="hl opt">&amp;</span> right<span class="hl opt">);</span>
  <span class="hl kwc">friend</span> <span class="hl kwb">int</span>
    <span class="hl kwc">operator</span><span class="hl opt">&gt;=(</span><span class="hl kwb">const</span> Integer<span class="hl opt">&amp;</span> left<span class="hl opt">,</span>
               <span class="hl kwb">const</span> Integer<span class="hl opt">&amp;</span> right<span class="hl opt">);</span>
  <span class="hl kwc">friend</span> <span class="hl kwb">int</span>
    <span class="hl kwc">operator</span><span class="hl opt">&amp;&amp;(</span><span class="hl kwb">const</span> Integer<span class="hl opt">&amp;</span> left<span class="hl opt">,</span>
               <span class="hl kwb">const</span> Integer<span class="hl opt">&amp;</span> right<span class="hl opt">);</span>
  <span class="hl kwc">friend</span> <span class="hl kwb">int</span>
    <span class="hl kwc">operator</span><span class="hl opt">||(</span><span class="hl kwb">const</span> Integer<span class="hl opt">&amp;</span> left<span class="hl opt">,</span>
               <span class="hl kwb">const</span> Integer<span class="hl opt">&amp;</span> right<span class="hl opt">);</span>
  <span class="hl slc">// Write the contents to an ostream:</span>
  <span class="hl kwb">void</span> <span class="hl kwd">print</span><span class="hl opt">(</span>std<span class="hl opt">::</span>ostream<span class="hl opt">&amp;</span> os<span class="hl opt">)</span> <span class="hl kwb">const</span> <span class="hl opt">{</span> os <span class="hl opt">&lt;&lt;</span> i<span class="hl opt">; }</span>
<span class="hl opt">};</span> 
<span class="hl ppc">#endif</span> <span class="hl slc">// INTEGER_H ///:~</span><span class="hl ppc"></span>
</pre>
        </div>
        <p class="title">
          <strong>Listado 12.3. C12/Integer.h</strong>
        </p>
      </div>
      <br class="example-break" />
      <div class="example">
        <a id="idp7151936"></a>
        <div class="example-contents">
          <pre class="programlisting">
<span class="hl slc">//: C12:Integer.cpp {O}</span>
<span class="hl slc">// Implementation of overloaded operators</span>
<span class="hl ppc">#include</span> <span class="hl pps">&quot;Integer.h&quot;</span><span class="hl ppc"></span>
<span class="hl ppc">#include</span> <span class="hl pps">&quot;../require.h&quot;</span><span class="hl ppc"></span>

<span class="hl kwb">const</span> Integer
  <span class="hl kwc">operator</span><span class="hl opt">+(</span><span class="hl kwb">const</span> Integer<span class="hl opt">&amp;</span> left<span class="hl opt">,</span>
            <span class="hl kwb">const</span> Integer<span class="hl opt">&amp;</span> right<span class="hl opt">) {</span>
  <span class="hl kwa">return</span> <span class="hl kwd">Integer</span><span class="hl opt">(</span>left<span class="hl opt">.</span>i <span class="hl opt">+</span> right<span class="hl opt">.</span>i<span class="hl opt">);</span>
<span class="hl opt">}</span>
<span class="hl kwb">const</span> Integer
  <span class="hl kwc">operator</span><span class="hl opt">-(</span><span class="hl kwb">const</span> Integer<span class="hl opt">&amp;</span> left<span class="hl opt">,</span>
            <span class="hl kwb">const</span> Integer<span class="hl opt">&amp;</span> right<span class="hl opt">) {</span>
  <span class="hl kwa">return</span> <span class="hl kwd">Integer</span><span class="hl opt">(</span>left<span class="hl opt">.</span>i <span class="hl opt">-</span> right<span class="hl opt">.</span>i<span class="hl opt">);</span>
<span class="hl opt">}</span>
<span class="hl kwb">const</span> Integer
  <span class="hl kwc">operator</span><span class="hl opt">*(</span><span class="hl kwb">const</span> Integer<span class="hl opt">&amp;</span> left<span class="hl opt">,</span>
            <span class="hl kwb">const</span> Integer<span class="hl opt">&amp;</span> right<span class="hl opt">) {</span>
  <span class="hl kwa">return</span> <span class="hl kwd">Integer</span><span class="hl opt">(</span>left<span class="hl opt">.</span>i <span class="hl opt">*</span> right<span class="hl opt">.</span>i<span class="hl opt">);</span>
<span class="hl opt">}</span>
<span class="hl kwb">const</span> Integer
  <span class="hl kwc">operator</span><span class="hl opt">/(</span><span class="hl kwb">const</span> Integer<span class="hl opt">&amp;</span> left<span class="hl opt">,</span>
            <span class="hl kwb">const</span> Integer<span class="hl opt">&amp;</span> right<span class="hl opt">) {</span>
  <span class="hl kwd">require</span><span class="hl opt">(</span>right<span class="hl opt">.</span>i <span class="hl opt">!=</span> <span class="hl num">0</span><span class="hl opt">,</span> <span class="hl str">&quot;divide by zero&quot;</span><span class="hl opt">);</span>
  <span class="hl kwa">return</span> <span class="hl kwd">Integer</span><span class="hl opt">(</span>left<span class="hl opt">.</span>i <span class="hl opt">/</span> right<span class="hl opt">.</span>i<span class="hl opt">);</span>
<span class="hl opt">}</span>
<span class="hl kwb">const</span> Integer
  <span class="hl kwc">operator</span><span class="hl opt">%(</span><span class="hl kwb">const</span> Integer<span class="hl opt">&amp;</span> left<span class="hl opt">,</span>
            <span class="hl kwb">const</span> Integer<span class="hl opt">&amp;</span> right<span class="hl opt">) {</span>
  <span class="hl kwd">require</span><span class="hl opt">(</span>right<span class="hl opt">.</span>i <span class="hl opt">!=</span> <span class="hl num">0</span><span class="hl opt">,</span> <span class="hl str">&quot;modulo by zero&quot;</span><span class="hl opt">);</span>
  <span class="hl kwa">return</span> <span class="hl kwd">Integer</span><span class="hl opt">(</span>left<span class="hl opt">.</span>i <span class="hl opt">%</span> right<span class="hl opt">.</span>i<span class="hl opt">);</span>
<span class="hl opt">}</span>
<span class="hl kwb">const</span> Integer
  <span class="hl kwc">operator</span>^<span class="hl opt">(</span><span class="hl kwb">const</span> Integer<span class="hl opt">&amp;</span> left<span class="hl opt">,</span>
            <span class="hl kwb">const</span> Integer<span class="hl opt">&amp;</span> right<span class="hl opt">) {</span>
  <span class="hl kwa">return</span> <span class="hl kwd">Integer</span><span class="hl opt">(</span>left<span class="hl opt">.</span>i ^ right<span class="hl opt">.</span>i<span class="hl opt">);</span>
<span class="hl opt">}</span>
<span class="hl kwb">const</span> Integer
  <span class="hl kwc">operator</span><span class="hl opt">&amp;(</span><span class="hl kwb">const</span> Integer<span class="hl opt">&amp;</span> left<span class="hl opt">,</span>
            <span class="hl kwb">const</span> Integer<span class="hl opt">&amp;</span> right<span class="hl opt">) {</span>
  <span class="hl kwa">return</span> <span class="hl kwd">Integer</span><span class="hl opt">(</span>left<span class="hl opt">.</span>i <span class="hl opt">&amp;</span> right<span class="hl opt">.</span>i<span class="hl opt">);</span>
<span class="hl opt">}</span>
<span class="hl kwb">const</span> Integer
  <span class="hl kwc">operator</span><span class="hl opt">|(</span><span class="hl kwb">const</span> Integer<span class="hl opt">&amp;</span> left<span class="hl opt">,</span>
            <span class="hl kwb">const</span> Integer<span class="hl opt">&amp;</span> right<span class="hl opt">) {</span>
  <span class="hl kwa">return</span> <span class="hl kwd">Integer</span><span class="hl opt">(</span>left<span class="hl opt">.</span>i <span class="hl opt">|</span> right<span class="hl opt">.</span>i<span class="hl opt">);</span>
<span class="hl opt">}</span>
<span class="hl kwb">const</span> Integer
  <span class="hl kwc">operator</span><span class="hl opt">&lt;&lt;(</span><span class="hl kwb">const</span> Integer<span class="hl opt">&amp;</span> left<span class="hl opt">,</span>
             <span class="hl kwb">const</span> Integer<span class="hl opt">&amp;</span> right<span class="hl opt">) {</span>
  <span class="hl kwa">return</span> <span class="hl kwd">Integer</span><span class="hl opt">(</span>left<span class="hl opt">.</span>i <span class="hl opt">&lt;&lt;</span> right<span class="hl opt">.</span>i<span class="hl opt">);</span>
<span class="hl opt">}</span>
<span class="hl kwb">const</span> Integer
  <span class="hl kwc">operator</span><span class="hl opt">&gt;&gt;(</span><span class="hl kwb">const</span> Integer<span class="hl opt">&amp;</span> left<span class="hl opt">,</span>
             <span class="hl kwb">const</span> Integer<span class="hl opt">&amp;</span> right<span class="hl opt">) {</span>
  <span class="hl kwa">return</span> <span class="hl kwd">Integer</span><span class="hl opt">(</span>left<span class="hl opt">.</span>i <span class="hl opt">&gt;&gt;</span> right<span class="hl opt">.</span>i<span class="hl opt">);</span>
<span class="hl opt">}</span>
<span class="hl slc">// Assignments modify &amp; return lvalue:</span>
Integer<span class="hl opt">&amp;</span> <span class="hl kwc">operator</span><span class="hl opt">+=(</span>Integer<span class="hl opt">&amp;</span> left<span class="hl opt">,</span>
                    <span class="hl kwb">const</span> Integer<span class="hl opt">&amp;</span> right<span class="hl opt">) {</span>
   <span class="hl kwa">if</span><span class="hl opt">(&amp;</span>left <span class="hl opt">== &amp;</span>right<span class="hl opt">) {</span><span class="hl com">/* self-assignment */</span><span class="hl opt">}</span>
   left<span class="hl opt">.</span>i <span class="hl opt">+=</span> right<span class="hl opt">.</span>i<span class="hl opt">;</span>
   <span class="hl kwa">return</span> left<span class="hl opt">;</span>
<span class="hl opt">}</span>
Integer<span class="hl opt">&amp;</span> <span class="hl kwc">operator</span><span class="hl opt">-=(</span>Integer<span class="hl opt">&amp;</span> left<span class="hl opt">,</span>
                    <span class="hl kwb">const</span> Integer<span class="hl opt">&amp;</span> right<span class="hl opt">) {</span>
   <span class="hl kwa">if</span><span class="hl opt">(&amp;</span>left <span class="hl opt">== &amp;</span>right<span class="hl opt">) {</span><span class="hl com">/* self-assignment */</span><span class="hl opt">}</span>
   left<span class="hl opt">.</span>i <span class="hl opt">-=</span> right<span class="hl opt">.</span>i<span class="hl opt">;</span>
   <span class="hl kwa">return</span> left<span class="hl opt">;</span>
<span class="hl opt">}</span>
Integer<span class="hl opt">&amp;</span> <span class="hl kwc">operator</span><span class="hl opt">*=(</span>Integer<span class="hl opt">&amp;</span> left<span class="hl opt">,</span>
                    <span class="hl kwb">const</span> Integer<span class="hl opt">&amp;</span> right<span class="hl opt">) {</span>
   <span class="hl kwa">if</span><span class="hl opt">(&amp;</span>left <span class="hl opt">== &amp;</span>right<span class="hl opt">) {</span><span class="hl com">/* self-assignment */</span><span class="hl opt">}</span>
   left<span class="hl opt">.</span>i <span class="hl opt">*=</span> right<span class="hl opt">.</span>i<span class="hl opt">;</span>
   <span class="hl kwa">return</span> left<span class="hl opt">;</span>
<span class="hl opt">}</span>
Integer<span class="hl opt">&amp;</span> <span class="hl kwc">operator</span><span class="hl opt">/=(</span>Integer<span class="hl opt">&amp;</span> left<span class="hl opt">,</span>
                    <span class="hl kwb">const</span> Integer<span class="hl opt">&amp;</span> right<span class="hl opt">) {</span>
   <span class="hl kwd">require</span><span class="hl opt">(</span>right<span class="hl opt">.</span>i <span class="hl opt">!=</span> <span class="hl num">0</span><span class="hl opt">,</span> <span class="hl str">&quot;divide by zero&quot;</span><span class="hl opt">);</span>
   <span class="hl kwa">if</span><span class="hl opt">(&amp;</span>left <span class="hl opt">== &amp;</span>right<span class="hl opt">) {</span><span class="hl com">/* self-assignment */</span><span class="hl opt">}</span>
   left<span class="hl opt">.</span>i <span class="hl opt">/=</span> right<span class="hl opt">.</span>i<span class="hl opt">;</span>
   <span class="hl kwa">return</span> left<span class="hl opt">;</span>
<span class="hl opt">}</span>
Integer<span class="hl opt">&amp;</span> <span class="hl kwc">operator</span><span class="hl opt">%=(</span>Integer<span class="hl opt">&amp;</span> left<span class="hl opt">,</span>
                    <span class="hl kwb">const</span> Integer<span class="hl opt">&amp;</span> right<span class="hl opt">) {</span>
   <span class="hl kwd">require</span><span class="hl opt">(</span>right<span class="hl opt">.</span>i <span class="hl opt">!=</span> <span class="hl num">0</span><span class="hl opt">,</span> <span class="hl str">&quot;modulo by zero&quot;</span><span class="hl opt">);</span>
   <span class="hl kwa">if</span><span class="hl opt">(&amp;</span>left <span class="hl opt">== &amp;</span>right<span class="hl opt">) {</span><span class="hl com">/* self-assignment */</span><span class="hl opt">}</span>
   left<span class="hl opt">.</span>i <span class="hl opt">%=</span> right<span class="hl opt">.</span>i<span class="hl opt">;</span>
   <span class="hl kwa">return</span> left<span class="hl opt">;</span>
<span class="hl opt">}</span>
Integer<span class="hl opt">&amp;</span> <span class="hl kwc">operator</span>^<span class="hl opt">=(</span>Integer<span class="hl opt">&amp;</span> left<span class="hl opt">,</span>
                    <span class="hl kwb">const</span> Integer<span class="hl opt">&amp;</span> right<span class="hl opt">) {</span>
   <span class="hl kwa">if</span><span class="hl opt">(&amp;</span>left <span class="hl opt">== &amp;</span>right<span class="hl opt">) {</span><span class="hl com">/* self-assignment */</span><span class="hl opt">}</span>
   left<span class="hl opt">.</span>i ^<span class="hl opt">=</span> right<span class="hl opt">.</span>i<span class="hl opt">;</span>
   <span class="hl kwa">return</span> left<span class="hl opt">;</span>
<span class="hl opt">}</span>
Integer<span class="hl opt">&amp;</span> <span class="hl kwc">operator</span><span class="hl opt">&amp;=(</span>Integer<span class="hl opt">&amp;</span> left<span class="hl opt">,</span>
                    <span class="hl kwb">const</span> Integer<span class="hl opt">&amp;</span> right<span class="hl opt">) {</span>
   <span class="hl kwa">if</span><span class="hl opt">(&amp;</span>left <span class="hl opt">== &amp;</span>right<span class="hl opt">) {</span><span class="hl com">/* self-assignment */</span><span class="hl opt">}</span>
   left<span class="hl opt">.</span>i <span class="hl opt">&amp;=</span> right<span class="hl opt">.</span>i<span class="hl opt">;</span>
   <span class="hl kwa">return</span> left<span class="hl opt">;</span>
<span class="hl opt">}</span>
Integer<span class="hl opt">&amp;</span> <span class="hl kwc">operator</span><span class="hl opt">|=(</span>Integer<span class="hl opt">&amp;</span> left<span class="hl opt">,</span>
                    <span class="hl kwb">const</span> Integer<span class="hl opt">&amp;</span> right<span class="hl opt">) {</span>
   <span class="hl kwa">if</span><span class="hl opt">(&amp;</span>left <span class="hl opt">== &amp;</span>right<span class="hl opt">) {</span><span class="hl com">/* self-assignment */</span><span class="hl opt">}</span>
   left<span class="hl opt">.</span>i <span class="hl opt">|=</span> right<span class="hl opt">.</span>i<span class="hl opt">;</span>
   <span class="hl kwa">return</span> left<span class="hl opt">;</span>
<span class="hl opt">}</span>
Integer<span class="hl opt">&amp;</span> <span class="hl kwc">operator</span><span class="hl opt">&gt;&gt;=(</span>Integer<span class="hl opt">&amp;</span> left<span class="hl opt">,</span>
                     <span class="hl kwb">const</span> Integer<span class="hl opt">&amp;</span> right<span class="hl opt">) {</span>
   <span class="hl kwa">if</span><span class="hl opt">(&amp;</span>left <span class="hl opt">== &amp;</span>right<span class="hl opt">) {</span><span class="hl com">/* self-assignment */</span><span class="hl opt">}</span>
   left<span class="hl opt">.</span>i <span class="hl opt">&gt;&gt;=</span> right<span class="hl opt">.</span>i<span class="hl opt">;</span>
   <span class="hl kwa">return</span> left<span class="hl opt">;</span>
<span class="hl opt">}</span>
Integer<span class="hl opt">&amp;</span> <span class="hl kwc">operator</span><span class="hl opt">&lt;&lt;=(</span>Integer<span class="hl opt">&amp;</span> left<span class="hl opt">,</span>
                     <span class="hl kwb">const</span> Integer<span class="hl opt">&amp;</span> right<span class="hl opt">) {</span>
   <span class="hl kwa">if</span><span class="hl opt">(&amp;</span>left <span class="hl opt">== &amp;</span>right<span class="hl opt">) {</span><span class="hl com">/* self-assignment */</span><span class="hl opt">}</span>
   left<span class="hl opt">.</span>i <span class="hl opt">&lt;&lt;=</span> right<span class="hl opt">.</span>i<span class="hl opt">;</span>
   <span class="hl kwa">return</span> left<span class="hl opt">;</span>
<span class="hl opt">}</span>
<span class="hl slc">// Conditional operators return true/false:</span>
<span class="hl kwb">int</span> <span class="hl kwc">operator</span><span class="hl opt">==(</span><span class="hl kwb">const</span> Integer<span class="hl opt">&amp;</span> left<span class="hl opt">,</span>
               <span class="hl kwb">const</span> Integer<span class="hl opt">&amp;</span> right<span class="hl opt">) {</span>
    <span class="hl kwa">return</span> left<span class="hl opt">.</span>i <span class="hl opt">==</span> right<span class="hl opt">.</span>i<span class="hl opt">;</span>
<span class="hl opt">}</span>
<span class="hl kwb">int</span> <span class="hl kwc">operator</span><span class="hl opt">!=(</span><span class="hl kwb">const</span> Integer<span class="hl opt">&amp;</span> left<span class="hl opt">,</span>
               <span class="hl kwb">const</span> Integer<span class="hl opt">&amp;</span> right<span class="hl opt">) {</span>
    <span class="hl kwa">return</span> left<span class="hl opt">.</span>i <span class="hl opt">!=</span> right<span class="hl opt">.</span>i<span class="hl opt">;</span>
<span class="hl opt">}</span>
<span class="hl kwb">int</span> <span class="hl kwc">operator</span><span class="hl opt">&lt;(</span><span class="hl kwb">const</span> Integer<span class="hl opt">&amp;</span> left<span class="hl opt">,</span>
              <span class="hl kwb">const</span> Integer<span class="hl opt">&amp;</span> right<span class="hl opt">) {</span>
    <span class="hl kwa">return</span> left<span class="hl opt">.</span>i <span class="hl opt">&lt;</span> right<span class="hl opt">.</span>i<span class="hl opt">;</span>
<span class="hl opt">}</span>
<span class="hl kwb">int</span> <span class="hl kwc">operator</span><span class="hl opt">&gt;(</span><span class="hl kwb">const</span> Integer<span class="hl opt">&amp;</span> left<span class="hl opt">,</span>
              <span class="hl kwb">const</span> Integer<span class="hl opt">&amp;</span> right<span class="hl opt">) {</span>
    <span class="hl kwa">return</span> left<span class="hl opt">.</span>i <span class="hl opt">&gt;</span> right<span class="hl opt">.</span>i<span class="hl opt">;</span>
<span class="hl opt">}</span>
<span class="hl kwb">int</span> <span class="hl kwc">operator</span><span class="hl opt">&lt;=(</span><span class="hl kwb">const</span> Integer<span class="hl opt">&amp;</span> left<span class="hl opt">,</span>
               <span class="hl kwb">const</span> Integer<span class="hl opt">&amp;</span> right<span class="hl opt">) {</span>
    <span class="hl kwa">return</span> left<span class="hl opt">.</span>i <span class="hl opt">&lt;=</span> right<span class="hl opt">.</span>i<span class="hl opt">;</span>
<span class="hl opt">}</span>
<span class="hl kwb">int</span> <span class="hl kwc">operator</span><span class="hl opt">&gt;=(</span><span class="hl kwb">const</span> Integer<span class="hl opt">&amp;</span> left<span class="hl opt">,</span>
               <span class="hl kwb">const</span> Integer<span class="hl opt">&amp;</span> right<span class="hl opt">) {</span>
    <span class="hl kwa">return</span> left<span class="hl opt">.</span>i <span class="hl opt">&gt;=</span> right<span class="hl opt">.</span>i<span class="hl opt">;</span>
<span class="hl opt">}</span>
<span class="hl kwb">int</span> <span class="hl kwc">operator</span><span class="hl opt">&amp;&amp;(</span><span class="hl kwb">const</span> Integer<span class="hl opt">&amp;</span> left<span class="hl opt">,</span>
               <span class="hl kwb">const</span> Integer<span class="hl opt">&amp;</span> right<span class="hl opt">) {</span>
    <span class="hl kwa">return</span> left<span class="hl opt">.</span>i <span class="hl opt">&amp;&amp;</span> right<span class="hl opt">.</span>i<span class="hl opt">;</span>
<span class="hl opt">}</span>
<span class="hl kwb">int</span> <span class="hl kwc">operator</span><span class="hl opt">||(</span><span class="hl kwb">const</span> Integer<span class="hl opt">&amp;</span> left<span class="hl opt">,</span>
               <span class="hl kwb">const</span> Integer<span class="hl opt">&amp;</span> right<span class="hl opt">) {</span>
    <span class="hl kwa">return</span> left<span class="hl opt">.</span>i <span class="hl opt">||</span> right<span class="hl opt">.</span>i<span class="hl opt">;</span>
<span class="hl opt">}</span> <span class="hl slc">///:~</span>
</pre>
        </div>
        <p class="title">
          <strong>Listado 12.4. C12/Integer.cpp</strong>
        </p>
      </div>
      <br class="example-break" />
      <div class="example">
        <a id="idp7160944"></a>
        <div class="example-contents">
          <pre class="programlisting">
<span class="hl slc">//: C12:IntegerTest.cpp</span>
<span class="hl slc">//{L} Integer</span>
<span class="hl ppc">#include</span> <span class="hl pps">&quot;Integer.h&quot;</span><span class="hl ppc"></span>
<span class="hl ppc">#include &lt;fstream&gt;</span>
<span class="hl kwa">using namespace</span> std<span class="hl opt">;</span>
ofstream <span class="hl kwd">out</span><span class="hl opt">(</span><span class="hl str">&quot;IntegerTest.out&quot;</span><span class="hl opt">);</span>

<span class="hl kwb">void</span> <span class="hl kwd">h</span><span class="hl opt">(</span>Integer<span class="hl opt">&amp;</span> c1<span class="hl opt">,</span> Integer<span class="hl opt">&amp;</span> c2<span class="hl opt">) {</span>
  <span class="hl slc">// A complex expression:</span>
  c1 <span class="hl opt">+=</span> c1 <span class="hl opt">*</span> c2 <span class="hl opt">+</span> c2 <span class="hl opt">%</span> c1<span class="hl opt">;</span>
  <span class="hl ppc">#define TRY(OP) \</span>
<span class="hl ppc">    out &lt;&lt;</span> <span class="hl pps">&quot;c1 = &quot;</span><span class="hl ppc">; c1.print(out); \</span>
<span class="hl ppc">    out &lt;&lt;</span> <span class="hl pps">&quot;, c2 = &quot;</span><span class="hl ppc">; c2.print(out); \</span>
<span class="hl ppc">    out &lt;&lt;</span> <span class="hl pps">&quot;;  c1 &quot;</span><span class="hl ppc"> #OP</span> <span class="hl pps">&quot; c2 produces &quot;</span><span class="hl ppc">; \</span>
<span class="hl ppc">    (c1 OP c2).print(out); \</span>
<span class="hl ppc">    out &lt;&lt; endl;</span>
  <span class="hl kwd">TRY</span><span class="hl opt">(+)</span> <span class="hl kwd">TRY</span><span class="hl opt">(-)</span> <span class="hl kwd">TRY</span><span class="hl opt">(*)</span> <span class="hl kwd">TRY</span><span class="hl opt">(/)</span>
  <span class="hl kwd">TRY</span><span class="hl opt">(%)</span> <span class="hl kwd">TRY</span><span class="hl opt">(</span>^<span class="hl opt">)</span> <span class="hl kwd">TRY</span><span class="hl opt">(&amp;)</span> <span class="hl kwd">TRY</span><span class="hl opt">(|)</span>
  <span class="hl kwd">TRY</span><span class="hl opt">(&lt;&lt;)</span> <span class="hl kwd">TRY</span><span class="hl opt">(&gt;&gt;)</span> <span class="hl kwd">TRY</span><span class="hl opt">(+=)</span> <span class="hl kwd">TRY</span><span class="hl opt">(-=)</span>
  <span class="hl kwd">TRY</span><span class="hl opt">(*=)</span> <span class="hl kwd">TRY</span><span class="hl opt">(/=)</span> <span class="hl kwd">TRY</span><span class="hl opt">(%=)</span> <span class="hl kwd">TRY</span><span class="hl opt">(</span>^<span class="hl opt">=)</span>
  <span class="hl kwd">TRY</span><span class="hl opt">(&amp;=)</span> <span class="hl kwd">TRY</span><span class="hl opt">(|=)</span> <span class="hl kwd">TRY</span><span class="hl opt">(&gt;&gt;=)</span> <span class="hl kwd">TRY</span><span class="hl opt">(&lt;&lt;=)</span>
  <span class="hl slc">// Conditionals:</span>
  <span class="hl ppc">#define TRYC(OP) \</span>
<span class="hl ppc">    out &lt;&lt;</span> <span class="hl pps">&quot;c1 = &quot;</span><span class="hl ppc">; c1.print(out); \</span>
<span class="hl ppc">    out &lt;&lt;</span> <span class="hl pps">&quot;, c2 = &quot;</span><span class="hl ppc">; c2.print(out); \</span>
<span class="hl ppc">    out &lt;&lt;</span> <span class="hl pps">&quot;;  c1 &quot;</span><span class="hl ppc"> #OP</span> <span class="hl pps">&quot; c2 produces &quot;</span><span class="hl ppc">; \</span>
<span class="hl ppc">    out &lt;&lt; (c1 OP c2); \</span>
<span class="hl ppc">    out &lt;&lt; endl;</span>
  <span class="hl kwd">TRYC</span><span class="hl opt">(&lt;)</span> <span class="hl kwd">TRYC</span><span class="hl opt">(&gt;)</span> <span class="hl kwd">TRYC</span><span class="hl opt">(==)</span> <span class="hl kwd">TRYC</span><span class="hl opt">(!=)</span> <span class="hl kwd">TRYC</span><span class="hl opt">(&lt;=)</span>
  <span class="hl kwd">TRYC</span><span class="hl opt">(&gt;=)</span> <span class="hl kwd">TRYC</span><span class="hl opt">(&amp;&amp;)</span> <span class="hl kwd">TRYC</span><span class="hl opt">(||)</span>
<span class="hl opt">}</span> 

<span class="hl kwb">int</span> <span class="hl kwd">main</span><span class="hl opt">() {</span>
  cout <span class="hl opt">&lt;&lt;</span> <span class="hl str">&quot;friend functions&quot;</span> <span class="hl opt">&lt;&lt;</span> endl<span class="hl opt">;</span>
  Integer <span class="hl kwd">c1</span><span class="hl opt">(</span><span class="hl num">47</span><span class="hl opt">),</span> <span class="hl kwd">c2</span><span class="hl opt">(</span><span class="hl num">9</span><span class="hl opt">);</span>
  <span class="hl kwd">h</span><span class="hl opt">(</span>c1<span class="hl opt">,</span> c2<span class="hl opt">);</span>
<span class="hl opt">}</span> <span class="hl slc">///:~</span>
</pre>
        </div>
        <p class="title">
          <strong>Listado 12.5. C12/IntegerTest.cpp</strong>
        </p>
      </div>
      <br class="example-break" />
      <div class="example">
        <a id="idp7163592"></a>
        <div class="example-contents">
          <pre class="programlisting">
<span class="hl slc">//: C12:Byte.h</span>
<span class="hl slc">// Member overloaded operators</span>
<span class="hl ppc">#ifndef BYTE_H</span>
<span class="hl ppc">#define BYTE_H</span>
<span class="hl ppc">#include</span> <span class="hl pps">&quot;../require.h&quot;</span><span class="hl ppc"></span>
<span class="hl ppc">#include &lt;iostream&gt;</span>
<span class="hl slc">// Member functions (implicit &quot;this&quot;):</span>
<span class="hl kwc">class</span> Byte <span class="hl opt">{</span> 
  <span class="hl kwb">unsigned char</span> b<span class="hl opt">;</span>
<span class="hl kwc">public</span><span class="hl opt">:</span>
  <span class="hl kwd">Byte</span><span class="hl opt">(</span><span class="hl kwb">unsigned char</span> bb <span class="hl opt">=</span> <span class="hl num">0</span><span class="hl opt">) :</span> <span class="hl kwd">b</span><span class="hl opt">(</span>bb<span class="hl opt">) {}</span>
  <span class="hl slc">// No side effects: const member function:</span>
  <span class="hl kwb">const</span> Byte
    <span class="hl kwc">operator</span><span class="hl opt">+(</span><span class="hl kwb">const</span> Byte<span class="hl opt">&amp;</span> right<span class="hl opt">)</span> <span class="hl kwb">const</span> <span class="hl opt">{</span>
    <span class="hl kwa">return</span> <span class="hl kwd">Byte</span><span class="hl opt">(</span>b <span class="hl opt">+</span> right<span class="hl opt">.</span>b<span class="hl opt">);</span>
  <span class="hl opt">}</span>
  <span class="hl kwb">const</span> Byte
    <span class="hl kwc">operator</span><span class="hl opt">-(</span><span class="hl kwb">const</span> Byte<span class="hl opt">&amp;</span> right<span class="hl opt">)</span> <span class="hl kwb">const</span> <span class="hl opt">{</span>
    <span class="hl kwa">return</span> <span class="hl kwd">Byte</span><span class="hl opt">(</span>b <span class="hl opt">-</span> right<span class="hl opt">.</span>b<span class="hl opt">);</span>
  <span class="hl opt">}</span>
  <span class="hl kwb">const</span> Byte
    <span class="hl kwc">operator</span><span class="hl opt">*(</span><span class="hl kwb">const</span> Byte<span class="hl opt">&amp;</span> right<span class="hl opt">)</span> <span class="hl kwb">const</span> <span class="hl opt">{</span>
    <span class="hl kwa">return</span> <span class="hl kwd">Byte</span><span class="hl opt">(</span>b <span class="hl opt">*</span> right<span class="hl opt">.</span>b<span class="hl opt">);</span>
  <span class="hl opt">}</span>
  <span class="hl kwb">const</span> Byte
    <span class="hl kwc">operator</span><span class="hl opt">/(</span><span class="hl kwb">const</span> Byte<span class="hl opt">&amp;</span> right<span class="hl opt">)</span> <span class="hl kwb">const</span> <span class="hl opt">{</span>
    <span class="hl kwd">require</span><span class="hl opt">(</span>right<span class="hl opt">.</span>b <span class="hl opt">!=</span> <span class="hl num">0</span><span class="hl opt">,</span> <span class="hl str">&quot;divide by zero&quot;</span><span class="hl opt">);</span>
    <span class="hl kwa">return</span> <span class="hl kwd">Byte</span><span class="hl opt">(</span>b <span class="hl opt">/</span> right<span class="hl opt">.</span>b<span class="hl opt">);</span>
  <span class="hl opt">}</span>
  <span class="hl kwb">const</span> Byte
    <span class="hl kwc">operator</span><span class="hl opt">%(</span><span class="hl kwb">const</span> Byte<span class="hl opt">&amp;</span> right<span class="hl opt">)</span> <span class="hl kwb">const</span> <span class="hl opt">{</span>
    <span class="hl kwd">require</span><span class="hl opt">(</span>right<span class="hl opt">.</span>b <span class="hl opt">!=</span> <span class="hl num">0</span><span class="hl opt">,</span> <span class="hl str">&quot;modulo by zero&quot;</span><span class="hl opt">);</span>
    <span class="hl kwa">return</span> <span class="hl kwd">Byte</span><span class="hl opt">(</span>b <span class="hl opt">%</span> right<span class="hl opt">.</span>b<span class="hl opt">);</span>
  <span class="hl opt">}</span>
  <span class="hl kwb">const</span> Byte
    <span class="hl kwc">operator</span>^<span class="hl opt">(</span><span class="hl kwb">const</span> Byte<span class="hl opt">&amp;</span> right<span class="hl opt">)</span> <span class="hl kwb">const</span> <span class="hl opt">{</span>
    <span class="hl kwa">return</span> <span class="hl kwd">Byte</span><span class="hl opt">(</span>b ^ right<span class="hl opt">.</span>b<span class="hl opt">);</span>
  <span class="hl opt">}</span>
  <span class="hl kwb">const</span> Byte
    <span class="hl kwc">operator</span><span class="hl opt">&amp;(</span><span class="hl kwb">const</span> Byte<span class="hl opt">&amp;</span> right<span class="hl opt">)</span> <span class="hl kwb">const</span> <span class="hl opt">{</span>
    <span class="hl kwa">return</span> <span class="hl kwd">Byte</span><span class="hl opt">(</span>b <span class="hl opt">&amp;</span> right<span class="hl opt">.</span>b<span class="hl opt">);</span>
  <span class="hl opt">}</span>
  <span class="hl kwb">const</span> Byte
    <span class="hl kwc">operator</span><span class="hl opt">|(</span><span class="hl kwb">const</span> Byte<span class="hl opt">&amp;</span> right<span class="hl opt">)</span> <span class="hl kwb">const</span> <span class="hl opt">{</span>
    <span class="hl kwa">return</span> <span class="hl kwd">Byte</span><span class="hl opt">(</span>b <span class="hl opt">|</span> right<span class="hl opt">.</span>b<span class="hl opt">);</span>
  <span class="hl opt">}</span>
  <span class="hl kwb">const</span> Byte
    <span class="hl kwc">operator</span><span class="hl opt">&lt;&lt;(</span><span class="hl kwb">const</span> Byte<span class="hl opt">&amp;</span> right<span class="hl opt">)</span> <span class="hl kwb">const</span> <span class="hl opt">{</span>
    <span class="hl kwa">return</span> <span class="hl kwd">Byte</span><span class="hl opt">(</span>b <span class="hl opt">&lt;&lt;</span> right<span class="hl opt">.</span>b<span class="hl opt">);</span>
  <span class="hl opt">}</span>
  <span class="hl kwb">const</span> Byte
    <span class="hl kwc">operator</span><span class="hl opt">&gt;&gt;(</span><span class="hl kwb">const</span> Byte<span class="hl opt">&amp;</span> right<span class="hl opt">)</span> <span class="hl kwb">const</span> <span class="hl opt">{</span>
    <span class="hl kwa">return</span> <span class="hl kwd">Byte</span><span class="hl opt">(</span>b <span class="hl opt">&gt;&gt;</span> right<span class="hl opt">.</span>b<span class="hl opt">);</span>
  <span class="hl opt">}</span>
  <span class="hl slc">// Assignments modify &amp; return lvalue.</span>
  <span class="hl slc">// operator= can only be a member function:</span>
  Byte<span class="hl opt">&amp;</span> <span class="hl kwc">operator</span><span class="hl opt">=(</span><span class="hl kwb">const</span> Byte<span class="hl opt">&amp;</span> right<span class="hl opt">) {</span>
    <span class="hl slc">// Handle self-assignment:</span>
    <span class="hl kwa">if</span><span class="hl opt">(</span><span class="hl kwa">this</span> <span class="hl opt">== &amp;</span>right<span class="hl opt">)</span> <span class="hl kwa">return</span> <span class="hl opt">*</span><span class="hl kwa">this</span><span class="hl opt">;</span>
    b <span class="hl opt">=</span> right<span class="hl opt">.</span>b<span class="hl opt">;</span>
    <span class="hl kwa">return</span> <span class="hl opt">*</span><span class="hl kwa">this</span><span class="hl opt">;</span>
  <span class="hl opt">}</span>
  Byte<span class="hl opt">&amp;</span> <span class="hl kwc">operator</span><span class="hl opt">+=(</span><span class="hl kwb">const</span> Byte<span class="hl opt">&amp;</span> right<span class="hl opt">) {</span>
    <span class="hl kwa">if</span><span class="hl opt">(</span><span class="hl kwa">this</span> <span class="hl opt">== &amp;</span>right<span class="hl opt">) {</span><span class="hl com">/* self-assignment */</span><span class="hl opt">}</span>
    b <span class="hl opt">+=</span> right<span class="hl opt">.</span>b<span class="hl opt">;</span>
    <span class="hl kwa">return</span> <span class="hl opt">*</span><span class="hl kwa">this</span><span class="hl opt">;</span>
  <span class="hl opt">}</span>
  Byte<span class="hl opt">&amp;</span> <span class="hl kwc">operator</span><span class="hl opt">-=(</span><span class="hl kwb">const</span> Byte<span class="hl opt">&amp;</span> right<span class="hl opt">) {</span>
    <span class="hl kwa">if</span><span class="hl opt">(</span><span class="hl kwa">this</span> <span class="hl opt">== &amp;</span>right<span class="hl opt">) {</span><span class="hl com">/* self-assignment */</span><span class="hl opt">}</span>
    b <span class="hl opt">-=</span> right<span class="hl opt">.</span>b<span class="hl opt">;</span>
    <span class="hl kwa">return</span> <span class="hl opt">*</span><span class="hl kwa">this</span><span class="hl opt">;</span>
  <span class="hl opt">}</span>
  Byte<span class="hl opt">&amp;</span> <span class="hl kwc">operator</span><span class="hl opt">*=(</span><span class="hl kwb">const</span> Byte<span class="hl opt">&amp;</span> right<span class="hl opt">) {</span>
    <span class="hl kwa">if</span><span class="hl opt">(</span><span class="hl kwa">this</span> <span class="hl opt">== &amp;</span>right<span class="hl opt">) {</span><span class="hl com">/* self-assignment */</span><span class="hl opt">}</span>
    b <span class="hl opt">*=</span> right<span class="hl opt">.</span>b<span class="hl opt">;</span>
    <span class="hl kwa">return</span> <span class="hl opt">*</span><span class="hl kwa">this</span><span class="hl opt">;</span>
  <span class="hl opt">}</span>
  Byte<span class="hl opt">&amp;</span> <span class="hl kwc">operator</span><span class="hl opt">/=(</span><span class="hl kwb">const</span> Byte<span class="hl opt">&amp;</span> right<span class="hl opt">) {</span>
    <span class="hl kwd">require</span><span class="hl opt">(</span>right<span class="hl opt">.</span>b <span class="hl opt">!=</span> <span class="hl num">0</span><span class="hl opt">,</span> <span class="hl str">&quot;divide by zero&quot;</span><span class="hl opt">);</span>
    <span class="hl kwa">if</span><span class="hl opt">(</span><span class="hl kwa">this</span> <span class="hl opt">== &amp;</span>right<span class="hl opt">) {</span><span class="hl com">/* self-assignment */</span><span class="hl opt">}</span>
    b <span class="hl opt">/=</span> right<span class="hl opt">.</span>b<span class="hl opt">;</span>
    <span class="hl kwa">return</span> <span class="hl opt">*</span><span class="hl kwa">this</span><span class="hl opt">;</span>
  <span class="hl opt">}</span>
  Byte<span class="hl opt">&amp;</span> <span class="hl kwc">operator</span><span class="hl opt">%=(</span><span class="hl kwb">const</span> Byte<span class="hl opt">&amp;</span> right<span class="hl opt">) {</span>
    <span class="hl kwd">require</span><span class="hl opt">(</span>right<span class="hl opt">.</span>b <span class="hl opt">!=</span> <span class="hl num">0</span><span class="hl opt">,</span> <span class="hl str">&quot;modulo by zero&quot;</span><span class="hl opt">);</span>
    <span class="hl kwa">if</span><span class="hl opt">(</span><span class="hl kwa">this</span> <span class="hl opt">== &amp;</span>right<span class="hl opt">) {</span><span class="hl com">/* self-assignment */</span><span class="hl opt">}</span>
    b <span class="hl opt">%=</span> right<span class="hl opt">.</span>b<span class="hl opt">;</span>
    <span class="hl kwa">return</span> <span class="hl opt">*</span><span class="hl kwa">this</span><span class="hl opt">;</span>
  <span class="hl opt">}</span>
  Byte<span class="hl opt">&amp;</span> <span class="hl kwc">operator</span>^<span class="hl opt">=(</span><span class="hl kwb">const</span> Byte<span class="hl opt">&amp;</span> right<span class="hl opt">) {</span>
    <span class="hl kwa">if</span><span class="hl opt">(</span><span class="hl kwa">this</span> <span class="hl opt">== &amp;</span>right<span class="hl opt">) {</span><span class="hl com">/* self-assignment */</span><span class="hl opt">}</span>
    b ^<span class="hl opt">=</span> right<span class="hl opt">.</span>b<span class="hl opt">;</span>
    <span class="hl kwa">return</span> <span class="hl opt">*</span><span class="hl kwa">this</span><span class="hl opt">;</span>
  <span class="hl opt">}</span>
  Byte<span class="hl opt">&amp;</span> <span class="hl kwc">operator</span><span class="hl opt">&amp;=(</span><span class="hl kwb">const</span> Byte<span class="hl opt">&amp;</span> right<span class="hl opt">) {</span>
    <span class="hl kwa">if</span><span class="hl opt">(</span><span class="hl kwa">this</span> <span class="hl opt">== &amp;</span>right<span class="hl opt">) {</span><span class="hl com">/* self-assignment */</span><span class="hl opt">}</span>
    b <span class="hl opt">&amp;=</span> right<span class="hl opt">.</span>b<span class="hl opt">;</span>
    <span class="hl kwa">return</span> <span class="hl opt">*</span><span class="hl kwa">this</span><span class="hl opt">;</span>
  <span class="hl opt">}</span>
  Byte<span class="hl opt">&amp;</span> <span class="hl kwc">operator</span><span class="hl opt">|=(</span><span class="hl kwb">const</span> Byte<span class="hl opt">&amp;</span> right<span class="hl opt">) {</span>
    <span class="hl kwa">if</span><span class="hl opt">(</span><span class="hl kwa">this</span> <span class="hl opt">== &amp;</span>right<span class="hl opt">) {</span><span class="hl com">/* self-assignment */</span><span class="hl opt">}</span>
    b <span class="hl opt">|=</span> right<span class="hl opt">.</span>b<span class="hl opt">;</span>
    <span class="hl kwa">return</span> <span class="hl opt">*</span><span class="hl kwa">this</span><span class="hl opt">;</span>
  <span class="hl opt">}</span>
  Byte<span class="hl opt">&amp;</span> <span class="hl kwc">operator</span><span class="hl opt">&gt;&gt;=(</span><span class="hl kwb">const</span> Byte<span class="hl opt">&amp;</span> right<span class="hl opt">) {</span>
    <span class="hl kwa">if</span><span class="hl opt">(</span><span class="hl kwa">this</span> <span class="hl opt">== &amp;</span>right<span class="hl opt">) {</span><span class="hl com">/* self-assignment */</span><span class="hl opt">}</span>
    b <span class="hl opt">&gt;&gt;=</span> right<span class="hl opt">.</span>b<span class="hl opt">;</span>
    <span class="hl kwa">return</span> <span class="hl opt">*</span><span class="hl kwa">this</span><span class="hl opt">;</span>
  <span class="hl opt">}</span>
  Byte<span class="hl opt">&amp;</span> <span class="hl kwc">operator</span><span class="hl opt">&lt;&lt;=(</span><span class="hl kwb">const</span> Byte<span class="hl opt">&amp;</span> right<span class="hl opt">) {</span>
    <span class="hl kwa">if</span><span class="hl opt">(</span><span class="hl kwa">this</span> <span class="hl opt">== &amp;</span>right<span class="hl opt">) {</span><span class="hl com">/* self-assignment */</span><span class="hl opt">}</span>
    b <span class="hl opt">&lt;&lt;=</span> right<span class="hl opt">.</span>b<span class="hl opt">;</span>
    <span class="hl kwa">return</span> <span class="hl opt">*</span><span class="hl kwa">this</span><span class="hl opt">;</span>
  <span class="hl opt">}</span>
  <span class="hl slc">// Conditional operators return true/false:</span>
  <span class="hl kwb">int</span> <span class="hl kwc">operator</span><span class="hl opt">==(</span><span class="hl kwb">const</span> Byte<span class="hl opt">&amp;</span> right<span class="hl opt">)</span> <span class="hl kwb">const</span> <span class="hl opt">{</span>
      <span class="hl kwa">return</span> b <span class="hl opt">==</span> right<span class="hl opt">.</span>b<span class="hl opt">;</span>
  <span class="hl opt">}</span>
  <span class="hl kwb">int</span> <span class="hl kwc">operator</span><span class="hl opt">!=(</span><span class="hl kwb">const</span> Byte<span class="hl opt">&amp;</span> right<span class="hl opt">)</span> <span class="hl kwb">const</span> <span class="hl opt">{</span>
      <span class="hl kwa">return</span> b <span class="hl opt">!=</span> right<span class="hl opt">.</span>b<span class="hl opt">;</span>
  <span class="hl opt">}</span>
  <span class="hl kwb">int</span> <span class="hl kwc">operator</span><span class="hl opt">&lt;(</span><span class="hl kwb">const</span> Byte<span class="hl opt">&amp;</span> right<span class="hl opt">)</span> <span class="hl kwb">const</span> <span class="hl opt">{</span>
      <span class="hl kwa">return</span> b <span class="hl opt">&lt;</span> right<span class="hl opt">.</span>b<span class="hl opt">;</span>
  <span class="hl opt">}</span>
  <span class="hl kwb">int</span> <span class="hl kwc">operator</span><span class="hl opt">&gt;(</span><span class="hl kwb">const</span> Byte<span class="hl opt">&amp;</span> right<span class="hl opt">)</span> <span class="hl kwb">const</span> <span class="hl opt">{</span>
      <span class="hl kwa">return</span> b <span class="hl opt">&gt;</span> right<span class="hl opt">.</span>b<span class="hl opt">;</span>
  <span class="hl opt">}</span>
  <span class="hl kwb">int</span> <span class="hl kwc">operator</span><span class="hl opt">&lt;=(</span><span class="hl kwb">const</span> Byte<span class="hl opt">&amp;</span> right<span class="hl opt">)</span> <span class="hl kwb">const</span> <span class="hl opt">{</span>
      <span class="hl kwa">return</span> b <span class="hl opt">&lt;=</span> right<span class="hl opt">.</span>b<span class="hl opt">;</span>
  <span class="hl opt">}</span>
  <span class="hl kwb">int</span> <span class="hl kwc">operator</span><span class="hl opt">&gt;=(</span><span class="hl kwb">const</span> Byte<span class="hl opt">&amp;</span> right<span class="hl opt">)</span> <span class="hl kwb">const</span> <span class="hl opt">{</span>
      <span class="hl kwa">return</span> b <span class="hl opt">&gt;=</span> right<span class="hl opt">.</span>b<span class="hl opt">;</span>
  <span class="hl opt">}</span>
  <span class="hl kwb">int</span> <span class="hl kwc">operator</span><span class="hl opt">&amp;&amp;(</span><span class="hl kwb">const</span> Byte<span class="hl opt">&amp;</span> right<span class="hl opt">)</span> <span class="hl kwb">const</span> <span class="hl opt">{</span>
      <span class="hl kwa">return</span> b <span class="hl opt">&amp;&amp;</span> right<span class="hl opt">.</span>b<span class="hl opt">;</span>
  <span class="hl opt">}</span>
  <span class="hl kwb">int</span> <span class="hl kwc">operator</span><span class="hl opt">||(</span><span class="hl kwb">const</span> Byte<span class="hl opt">&amp;</span> right<span class="hl opt">)</span> <span class="hl kwb">const</span> <span class="hl opt">{</span>
      <span class="hl kwa">return</span> b <span class="hl opt">||</span> right<span class="hl opt">.</span>b<span class="hl opt">;</span>
  <span class="hl opt">}</span>
  <span class="hl slc">// Write the contents to an ostream:</span>
  <span class="hl kwb">void</span> <span class="hl kwd">print</span><span class="hl opt">(</span>std<span class="hl opt">::</span>ostream<span class="hl opt">&amp;</span> os<span class="hl opt">)</span> <span class="hl kwb">const</span> <span class="hl opt">{</span>
    os <span class="hl opt">&lt;&lt;</span> <span class="hl str">&quot;0x&quot;</span> <span class="hl opt">&lt;&lt;</span> std<span class="hl opt">::</span>hex <span class="hl opt">&lt;&lt;</span> <span class="hl kwb">int</span><span class="hl opt">(</span>b<span class="hl opt">) &lt;&lt;</span> std<span class="hl opt">::</span>dec<span class="hl opt">;</span>
  <span class="hl opt">}</span>
<span class="hl opt">};</span> 
<span class="hl ppc">#endif</span> <span class="hl slc">// BYTE_H ///:~</span><span class="hl ppc"></span>
</pre>
        </div>
        <p class="title">
          <strong>Listado 12.6. C12/Byte.h</strong>
        </p>
      </div>
      <br class="example-break" />
      <div class="example">
        <a id="idp7168504"></a>
        <div class="example-contents">
          <pre class="programlisting">
<span class="hl slc">//: C12:ByteTest.cpp</span>
<span class="hl ppc">#include</span> <span class="hl pps">&quot;Byte.h&quot;</span><span class="hl ppc"></span>
<span class="hl ppc">#include &lt;fstream&gt;</span>
<span class="hl kwa">using namespace</span> std<span class="hl opt">;</span>
ofstream <span class="hl kwd">out</span><span class="hl opt">(</span><span class="hl str">&quot;ByteTest.out&quot;</span><span class="hl opt">);</span>

<span class="hl kwb">void</span> <span class="hl kwd">k</span><span class="hl opt">(</span>Byte<span class="hl opt">&amp;</span> b1<span class="hl opt">,</span> Byte<span class="hl opt">&amp;</span> b2<span class="hl opt">) {</span>
  b1 <span class="hl opt">=</span> b1 <span class="hl opt">*</span> b2 <span class="hl opt">+</span> b2 <span class="hl opt">%</span> b1<span class="hl opt">;</span>

  <span class="hl ppc">#define TRY2(OP) \</span>
<span class="hl ppc">    out &lt;&lt;</span> <span class="hl pps">&quot;b1 = &quot;</span><span class="hl ppc">; b1.print(out); \</span>
<span class="hl ppc">    out &lt;&lt;</span> <span class="hl pps">&quot;, b2 = &quot;</span><span class="hl ppc">; b2.print(out); \</span>
<span class="hl ppc">    out &lt;&lt;</span> <span class="hl pps">&quot;;  b1 &quot;</span><span class="hl ppc"> #OP</span> <span class="hl pps">&quot; b2 produces &quot;</span><span class="hl ppc">; \</span>
<span class="hl ppc">    (b1 OP b2).print(out); \</span>
<span class="hl ppc">    out &lt;&lt; endl;</span>

  b1 <span class="hl opt">=</span> <span class="hl num">9</span><span class="hl opt">;</span> b2 <span class="hl opt">=</span> <span class="hl num">47</span><span class="hl opt">;</span>
  <span class="hl kwd">TRY2</span><span class="hl opt">(+)</span> <span class="hl kwd">TRY2</span><span class="hl opt">(-)</span> <span class="hl kwd">TRY2</span><span class="hl opt">(*)</span> <span class="hl kwd">TRY2</span><span class="hl opt">(/)</span>
  <span class="hl kwd">TRY2</span><span class="hl opt">(%)</span> <span class="hl kwd">TRY2</span><span class="hl opt">(</span>^<span class="hl opt">)</span> <span class="hl kwd">TRY2</span><span class="hl opt">(&amp;)</span> <span class="hl kwd">TRY2</span><span class="hl opt">(|)</span>
  <span class="hl kwd">TRY2</span><span class="hl opt">(&lt;&lt;)</span> <span class="hl kwd">TRY2</span><span class="hl opt">(&gt;&gt;)</span> <span class="hl kwd">TRY2</span><span class="hl opt">(+=)</span> <span class="hl kwd">TRY2</span><span class="hl opt">(-=)</span>
  <span class="hl kwd">TRY2</span><span class="hl opt">(*=)</span> <span class="hl kwd">TRY2</span><span class="hl opt">(/=)</span> <span class="hl kwd">TRY2</span><span class="hl opt">(%=)</span> <span class="hl kwd">TRY2</span><span class="hl opt">(</span>^<span class="hl opt">=)</span>
  <span class="hl kwd">TRY2</span><span class="hl opt">(&amp;=)</span> <span class="hl kwd">TRY2</span><span class="hl opt">(|=)</span> <span class="hl kwd">TRY2</span><span class="hl opt">(&gt;&gt;=)</span> <span class="hl kwd">TRY2</span><span class="hl opt">(&lt;&lt;=)</span>
  <span class="hl kwd">TRY2</span><span class="hl opt">(=)</span> <span class="hl slc">// Assignment operator</span>

  <span class="hl slc">// Conditionals:</span>
  <span class="hl ppc">#define TRYC2(OP) \</span>
<span class="hl ppc">    out &lt;&lt;</span> <span class="hl pps">&quot;b1 = &quot;</span><span class="hl ppc">; b1.print(out); \</span>
<span class="hl ppc">    out &lt;&lt;</span> <span class="hl pps">&quot;, b2 = &quot;</span><span class="hl ppc">; b2.print(out); \</span>
<span class="hl ppc">    out &lt;&lt;</span> <span class="hl pps">&quot;;  b1 &quot;</span><span class="hl ppc"> #OP</span> <span class="hl pps">&quot; b2 produces &quot;</span><span class="hl ppc">; \</span>
<span class="hl ppc">    out &lt;&lt; (b1 OP b2); \</span>
<span class="hl ppc">    out &lt;&lt; endl;</span>

  b1 <span class="hl opt">=</span> <span class="hl num">9</span><span class="hl opt">;</span> b2 <span class="hl opt">=</span> <span class="hl num">47</span><span class="hl opt">;</span>
  <span class="hl kwd">TRYC2</span><span class="hl opt">(&lt;)</span> <span class="hl kwd">TRYC2</span><span class="hl opt">(&gt;)</span> <span class="hl kwd">TRYC2</span><span class="hl opt">(==)</span> <span class="hl kwd">TRYC2</span><span class="hl opt">(!=)</span> <span class="hl kwd">TRYC2</span><span class="hl opt">(&lt;=)</span>
  <span class="hl kwd">TRYC2</span><span class="hl opt">(&gt;=)</span> <span class="hl kwd">TRYC2</span><span class="hl opt">(&amp;&amp;)</span> <span class="hl kwd">TRYC2</span><span class="hl opt">(||)</span>

  <span class="hl slc">// Chained assignment:</span>
  Byte b3 <span class="hl opt">=</span> <span class="hl num">92</span><span class="hl opt">;</span>
  b1 <span class="hl opt">=</span> b2 <span class="hl opt">=</span> b3<span class="hl opt">;</span>
<span class="hl opt">}</span>

<span class="hl kwb">int</span> <span class="hl kwd">main</span><span class="hl opt">() {</span>
  out <span class="hl opt">&lt;&lt;</span> <span class="hl str">&quot;member functions:&quot;</span> <span class="hl opt">&lt;&lt;</span> endl<span class="hl opt">;</span>
  Byte <span class="hl kwd">b1</span><span class="hl opt">(</span><span class="hl num">47</span><span class="hl opt">),</span> <span class="hl kwd">b2</span><span class="hl opt">(</span><span class="hl num">9</span><span class="hl opt">);</span>
  <span class="hl kwd">k</span><span class="hl opt">(</span>b1<span class="hl opt">,</span> b2<span class="hl opt">);</span>
<span class="hl opt">}</span> <span class="hl slc">///:~</span>
</pre>
        </div>
        <p class="title">
          <strong>Listado 12.7. C12/ByteTest.cpp</strong>
        </p>
      </div>
      <br class="example-break" />
      <p>
		Puede ver que <code class="literal">operator=</code> solo puede ser un método. Esto se explica después.
      </p>
      <p>
		Fíjese que todos los operadores de asignación tienen código para comprobar la auto
		asignación; ésta es una directiva general. En algunos casos esto no es necesario;
		por ejemplo, con <code class="function">operator+=</code> a menudo querrá decir <code class="code">A +=
		A</code> y sumar <code class="varname">A</code> a sí mismo. El lugar más importante para
		situar las comprobaciones para la auto asignación es
		<code class="function">operator=</code> porque con objetos complicados pueden ocurrir
		resultados desastrosos. (En algunos casos es correcto, pero siempre debería
		tenerlo en mente cuando escriba <code class="function">operator=</code>).
      </p>
      <p>
		Todos los operadores mostrados en los dos ejemplos previos son sobrecargados para
		manejar un tipo simple. También es posible sobrecargar operadores para manejar
		tipos compuestos, de manera que pueda sumar manzanas a naranjas, por
		ejemplo. Antes de que empiece una sobrecarga exhaustiva de operadores, no
		obstante, debería mirar la sección de conversión automática de tipos más adelante
		en este capitulo. A menudo, una conversión de tipos en el lugar adecuado puede
		ahorrarle un montón de operadores sobrecargados.
      </p>
    </div>
    <div class="navfooter">
      <hr />
      <table width="100%" summary="Navigation footer">
        <tr>
          <td class="navititle" width="1%">
            <a accesskey="p" href="ch12s03.html">
              <img src="./images/prev.png" alt="Anterior" />
            </a>
          </td>
          <td class="navititle" width="40%" align="left">
            <a accesskey="p" href="ch12s03.html">12.3. Operadores sobrecargables </a>
          </td>
          <td width="10%" align="center">
            <a accesskey="u" href="ch12s03.html">
              <img src="./images/up.png" alt="Subir" />
            </a>
          </td>
          <td class="navititle" width="40%" align="right">
            <a accesskey="n" href="ch12s03s03.html">12.3.3. Argumentos y valores de retorno</a>
          </td>
          <td class="navititle" width="1%" align="right">
            <a accesskey="n" href="ch12s03s03.html">
              <img src="./images/next.png" alt="Siguiente" />
            </a>
          </td>
        </tr>
        <tr>
          <td valign="top"> </td>
          <td> </td>
          <td width="10%" align="center">
            <a accesskey="h" href="index.html">
              <img src="./images/home.png" alt="Inicio" />
            </a>
          </td>
          <td> </td>
          <td valign="top"> </td>
        </tr>
      </table>
    </div>
  </body>
</html>
