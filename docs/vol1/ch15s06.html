<?xml version="1.0" encoding="ISO-8859-1" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1" />
    <title>15.6. ¿Por qué funciones virtuales?</title>
    <link rel="stylesheet" type="text/css" href="common.css" />
    <link rel="stylesheet" type="text/css" href="chunk.css" />
    <link rel="stylesheet" type="text/css" href="highlight.css" />
    <meta name="generator" content="DocBook XSL Stylesheets V1.76.1" />
    <link rel="home" href="index.html" title="Pensar en C++ (Volumen 1)" />
    <link rel="up" href="C15.html" title="15: Polimorfismo y Funciones virtuales" />
    <link rel="prev" href="ch15s05s05.html" title="15.5.5. Los objetos son diferentes" />
    <link rel="next" href="ch15s07.html" title="15.7. Clases base abstractas y funciones virtuales puras" />
  </head>
  <body>
    <div class="navfooter">
      <hr />
      <table width="100%" summary="Navigation footer">
        <tr>
          <td class="navititle" width="1%">
            <a accesskey="p" href="ch15s05s05.html">
              <img src="./images/prev.png" alt="Anterior" />
            </a>
          </td>
          <td class="navititle" width="40%" align="left">
            <a accesskey="p" href="ch15s05s05.html">15.5.5. Los objetos son diferentes</a>
          </td>
          <td width="10%" align="center">
            <a accesskey="u" href="C15.html">
              <img src="./images/up.png" alt="Subir" />
            </a>
          </td>
          <td class="navititle" width="40%" align="right">
            <a accesskey="n" href="ch15s07.html">15.7. Clases base abstractas y funciones virtuales puras</a>
          </td>
          <td class="navititle" width="1%" align="right">
            <a accesskey="n" href="ch15s07.html">
              <img src="./images/next.png" alt="Siguiente" />
            </a>
          </td>
        </tr>
      </table>
    </div>
    <div class="sect1" title="15.6. ¿Por qué funciones virtuales?">
      <div class="titlepage">
        <div>
          <div>
            <h2 class="title" style="clear: both"><a id="idp8147200"></a>15.6. ¿Por qué funciones virtuales?</h2>
          </div>
        </div>
      </div>
      <p>
      A estas alturas usted se puede hacer una pregunta: "Si esta
      técnica es tan importante, y si se ejecuta la función
      <span class="emphasis"><em>correcta</em></span> todo el tiempo, ¿por qué es una
      opción? ¿por qué es necesario conocerla?"
    </p>
      <p>
      Es una buena pregunta, y la respuesta se debe a la filosofía
      fudamental de C++: "Debido a que no es tan eficiente". Se puede
      ver en el código en lenguaje ensamblador que se generan, en vez de
      un simple <code class="keyword">CALL</code> a una dirección absoluta, dos
      instrucciones ensamblador necesarias para preparar la llamada a
      función. Esto requiere más código y tiempo de ejecución.
    </p>
      <p>
      Algunos lenguajes orientado a objetos han decidido que la
      aproximación a la ligadura dinámica es intrínseca a la
      programación orientada a objetos, que siempre debe tener lugar,
      que no puede ser opcional, y que el usuario no tiene por qué
      conocerlo. Esta es una decisión de diseño cuando se crea un
      lenguaje, y éste camino particular es adecuado para varios
      lenguajes<sup>[<a id="idp8150816" href="#ftn.idp8150816" class="footnote">77</a>]</sup>.
      Sin embargo, C++ tiene una tara por venir
      de C, donde la eficiencia es crítica. Después de todo, C fué
      creado para sustituir al lenguaje ensamblador para la
      implementación de un sistema operativo (haciendo a este sistema
      operativo - Unix - mucho más portable que sus antecesores). Y una
      de las principales razones para la invención de C++ fue hacer más
      eficientes a los programadores de C<sup>[<a id="idp8152168" href="#ftn.idp8152168" class="footnote">78</a>]</sup>. Y la primera pregunta cuando un programador de C se
      pasa a C++ es, "¿Cómo me afectará el cambio en velocidad y tamaño?
      Si la respuesta fuera, "Todo es magnífico excepto en las llamadas
      a funciones donde siempre tendrá un pequeña sobrecarga extra",
      mucha gente se hubiera aguantado con C antes que hacer el cambio a
      C++. Además las funciones inline no serían posibles, porque las
      funciones virtuales deben tener una dirección para meter en la
      VTABLE. Por lo tanto las funciones virtuales son opcionales,
      <span class="emphasis"><em>y</em></span> por defecto el lenguaje no es
      <code class="keyword">virtual</code>, porque es la configuración más
      eficiente. Stroustrup expuso que su línea de trabajo era, "Si no
      lo usa, no lo pague".
    </p>
      <p>
      Además la palabra reservada <code class="keyword">virtual</code> permite
      afinar el rendimiento. Cuando se diseñan las clases, sin embargo,
      no hay que preocuparse por afinarlas. Si va a usar el
      polimorfismo, úselo en todos los sitios. Sólo es necesario buscar
      funciones que se puedan hacer no virtuales cuando se esté buscando
      modos de acelerar el código (y normalmente hay mucho más que ganar
      en otras áreas - una buena idea es intentar adivinar dónde se
      encuentran los cuellos de botella).
    </p>
      <p>
      Como anécdota la evidencia sugiere que el tamaño y la velocidad de
      C++ sufren un impacto del 10 por ciento con respecto a C, y a
      menudo están mucho más cerca de ser parejos. Además otra razón es
      que se puede diseñar un programa en C++ más rápido y más pequeño
      que como sería en C.
    </p>
      <div class="footnotes">
        <br />
        <hr width="100" align="left" />
        <div class="footnote">
          <p><sup>[<a id="ftn.idp8150816" href="#idp8150816" class="para">77</a>] </sup>
	  Smalltalk, Java y Python, por ejemplo, usan esta aproximación
	  con gran éxito.
	</p>
        </div>
        <div class="footnote">
          <p><sup>[<a id="ftn.idp8152168" href="#idp8152168" class="para">78</a>] </sup>
	  En los laboratorios Bell, donde se inventó C, hay <span class="emphasis"><em>un
	  montón</em></span> de programadores de C. Hacerlos más
	  eficientes, aunque sea sólo un poco, ahorra a la compañía
	  muchos millones.
	</p>
        </div>
      </div>
    </div>
    <div class="navfooter">
      <hr />
      <table width="100%" summary="Navigation footer">
        <tr>
          <td class="navititle" width="1%">
            <a accesskey="p" href="ch15s05s05.html">
              <img src="./images/prev.png" alt="Anterior" />
            </a>
          </td>
          <td class="navititle" width="40%" align="left">
            <a accesskey="p" href="ch15s05s05.html">15.5.5. Los objetos son diferentes</a>
          </td>
          <td width="10%" align="center">
            <a accesskey="u" href="C15.html">
              <img src="./images/up.png" alt="Subir" />
            </a>
          </td>
          <td class="navititle" width="40%" align="right">
            <a accesskey="n" href="ch15s07.html">15.7. Clases base abstractas y funciones virtuales puras</a>
          </td>
          <td class="navititle" width="1%" align="right">
            <a accesskey="n" href="ch15s07.html">
              <img src="./images/next.png" alt="Siguiente" />
            </a>
          </td>
        </tr>
        <tr>
          <td valign="top"> </td>
          <td> </td>
          <td width="10%" align="center">
            <a accesskey="h" href="index.html">
              <img src="./images/home.png" alt="Inicio" />
            </a>
          </td>
          <td> </td>
          <td valign="top"> </td>
        </tr>
      </table>
    </div>
  </body>
</html>
