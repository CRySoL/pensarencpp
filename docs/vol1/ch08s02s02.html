<?xml version="1.0" encoding="ISO-8859-1" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1" />
    <title>8.2.2. Puntero constante</title>
    <link rel="stylesheet" type="text/css" href="common.css" />
    <link rel="stylesheet" type="text/css" href="chunk.css" />
    <link rel="stylesheet" type="text/css" href="highlight.css" />
    <meta name="generator" content="DocBook XSL Stylesheets V1.76.1" />
    <link rel="home" href="index.html" title="Pensar en C++ (Volumen 1)" />
    <link rel="up" href="ch08s02.html" title="8.2. Punteros" />
    <link rel="prev" href="ch08s02.html" title="8.2. Punteros" />
    <link rel="next" href="ch08s02s03.html" title="8.2.3. Asignación y comprobación de tipos" />
  </head>
  <body>
    <div class="navfooter">
      <hr />
      <table width="100%" summary="Navigation footer">
        <tr>
          <td class="navititle" width="1%">
            <a accesskey="p" href="ch08s02.html">
              <img src="./images/prev.png" alt="Anterior" />
            </a>
          </td>
          <td class="navititle" width="40%" align="left">
            <a accesskey="p" href="ch08s02.html">8.2. Punteros</a>
          </td>
          <td width="10%" align="center">
            <a accesskey="u" href="ch08s02.html">
              <img src="./images/up.png" alt="Subir" />
            </a>
          </td>
          <td class="navititle" width="40%" align="right">
            <a accesskey="n" href="ch08s02s03.html">8.2.3. Asignación y comprobación de tipos</a>
          </td>
          <td class="navititle" width="1%" align="right">
            <a accesskey="n" href="ch08s02s03.html">
              <img src="./images/next.png" alt="Siguiente" />
            </a>
          </td>
        </tr>
      </table>
    </div>
    <div class="sect2" title="8.2.2. Puntero constante">
      <div class="titlepage">
        <div>
          <div>
            <h3 class="title"><a id="idp6078048"></a>8.2.2. Puntero constante</h3>
          </div>
        </div>
      </div>
      <p>
	Para conseguir que el puntero sea inalterable, debe colocar el
	especificador <code class="keyword">const</code> a la derecha del *:
      </p>
      <pre class="programlisting">
<span class="hl kwb">int</span> d <span class="hl opt">=</span> <span class="hl num">1</span><span class="hl opt">;</span>
<span class="hl kwb">int</span> <span class="hl opt">*</span> <span class="hl kwb">const</span> w <span class="hl opt">= &amp;</span>d<span class="hl opt">;</span>
</pre>
      <p>
	Ahora, se lee «<code class="constant">w</code> es un puntero
	constate, y apunta a un <code class="type">entero</code>». Como el
	puntero en sí es ahora una constante, el compilador obliga a
	darle un valor inicial que no podrá alterarse durante la vida
	del puntero. En cualquier caso, puede cambiar el valor de lo
	que apunta el puntero con algo como:
      </p>
      <pre class="programlisting">
<span class="hl opt">*</span>w <span class="hl opt">=</span> <span class="hl num">2</span><span class="hl opt">;</span>
</pre>
      <p>
	También puede hacer un puntero constante a un elemento constante
	usando una de las formas siguientes:
      </p>
      <pre class="programlisting">
<span class="hl kwb">int</span> d <span class="hl opt">=</span> <span class="hl num">1</span><span class="hl opt">;</span>
<span class="hl kwb">const int</span><span class="hl opt">*</span> <span class="hl kwb">const</span> x <span class="hl opt">= &amp;</span>d<span class="hl opt">;</span>  <span class="hl slc">// (1)</span>
<span class="hl kwb">int const</span><span class="hl opt">*</span> <span class="hl kwb">const</span> x2 <span class="hl opt">= &amp;</span>d<span class="hl opt">;</span> <span class="hl slc">// (2)</span>
</pre>
      <p>
        Ahora ni el puntero ni el elemento al que apunta pueden
        modificarse.
      </p>
      <p>
	Algunos argumentan que la segunda forma es más consistente
	porque el <code class="keyword">const</code> se coloca siempre a la derecha de lo
	que afecta. Debe decidir que forma resulta más clara para su
	estilo de codificación particular.
      </p>
      <p>
	Algunas líneas de un archivo susceptible de ser compilado.
      </p>
      <div class="example">
        <a id="idp6083976"></a>
        <div class="example-contents">
          <pre class="programlisting">
<span class="hl slc">//: C08:ConstPointers.cpp</span>
<span class="hl kwb">const int</span><span class="hl opt">*</span> u<span class="hl opt">;</span>
<span class="hl kwb">int const</span><span class="hl opt">*</span> v<span class="hl opt">;</span>
<span class="hl kwb">int</span> d <span class="hl opt">=</span> <span class="hl num">1</span><span class="hl opt">;</span>
<span class="hl kwb">int</span><span class="hl opt">*</span> <span class="hl kwb">const</span> w <span class="hl opt">= &amp;</span>d<span class="hl opt">;</span>
<span class="hl kwb">const int</span><span class="hl opt">*</span> <span class="hl kwb">const</span> x <span class="hl opt">= &amp;</span>d<span class="hl opt">;</span>  <span class="hl slc">// (1)</span>
<span class="hl kwb">int const</span><span class="hl opt">*</span> <span class="hl kwb">const</span> x2 <span class="hl opt">= &amp;</span>d<span class="hl opt">;</span> <span class="hl slc">// (2)</span>
<span class="hl kwb">int</span> <span class="hl kwd">main</span><span class="hl opt">() {}</span> <span class="hl slc">///:~</span>
</pre>
        </div>
        <p class="title">
          <strong>Listado 8.3. C08/ConstPointers.cpp</strong>
        </p>
      </div>
      <br class="example-break" />
      <div class="sect3" title="Formato">
        <div class="titlepage">
          <div>
            <div>
              <h4 class="title"><a id="idp6085312"></a>Formato</h4>
            </div>
          </div>
        </div>
        <p>
          Este libro sigue la norma de poner sólo una definición de
          puntero por línea, e inicializar cada puntero en el punto de
          definición siempre que sea posible. Por eso, el estilo es
          colocar el <span class="symbol">*</span> al lado del tipo:
        </p>
        <pre class="programlisting">
<span class="hl kwb">int</span><span class="hl opt">*</span> u <span class="hl opt">= &amp;</span>i<span class="hl opt">;</span>
</pre>
        <p>
	  como si <code class="type">int*</code> fuese un tipo de dato básico. Esto
	  hace que el código sea más fácil de leer, pero
	  desafortunadamente, esta no es la forma en que funciona. El
	  «<span class="symbol">*</span>» se refiere al
	  identificador no al tipo. Se puede colocar en cualquier
	  sitio entre el nombre del tipo y el identificador. De modo
	  que puede hacer esto:
	</p>
        <pre class="programlisting">
<span class="hl kwb">int</span> <span class="hl opt">*</span> u <span class="hl opt">= &amp;</span>i<span class="hl opt">,</span> v <span class="hl opt">=</span> <span class="hl num">0</span><span class="hl opt">;</span>
</pre>
        <p>
	  donde se crea un <code class="code">int* u</code> y después un <code class="code">int
	 v</code> (que no es puntero). Como esto puede parecer confuso
	 a los lectores, es mejor utilizar el estilo mostrado en este
	 libro.
	</p>
      </div>
    </div>
    <div class="navfooter">
      <hr />
      <table width="100%" summary="Navigation footer">
        <tr>
          <td class="navititle" width="1%">
            <a accesskey="p" href="ch08s02.html">
              <img src="./images/prev.png" alt="Anterior" />
            </a>
          </td>
          <td class="navititle" width="40%" align="left">
            <a accesskey="p" href="ch08s02.html">8.2. Punteros</a>
          </td>
          <td width="10%" align="center">
            <a accesskey="u" href="ch08s02.html">
              <img src="./images/up.png" alt="Subir" />
            </a>
          </td>
          <td class="navititle" width="40%" align="right">
            <a accesskey="n" href="ch08s02s03.html">8.2.3. Asignación y comprobación de tipos</a>
          </td>
          <td class="navititle" width="1%" align="right">
            <a accesskey="n" href="ch08s02s03.html">
              <img src="./images/next.png" alt="Siguiente" />
            </a>
          </td>
        </tr>
        <tr>
          <td valign="top"> </td>
          <td> </td>
          <td width="10%" align="center">
            <a accesskey="h" href="index.html">
              <img src="./images/home.png" alt="Inicio" />
            </a>
          </td>
          <td> </td>
          <td valign="top"> </td>
        </tr>
      </table>
    </div>
  </body>
</html>
