<?xml version="1.0" encoding="ISO-8859-1" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1" />
    <title>3.4.6. Introducción a las referencias de C++</title>
    <link rel="stylesheet" type="text/css" href="common.css" />
    <link rel="stylesheet" type="text/css" href="chunk.css" />
    <link rel="stylesheet" type="text/css" href="highlight.css" />
    <meta name="generator" content="DocBook XSL Stylesheets V1.76.1" />
    <link rel="home" href="index.html" title="Pensar en C++ (Volumen 1)" />
    <link rel="up" href="ch03s04.html" title="3.4. Introducción a los tipos de datos" />
    <link rel="prev" href="ch03s04s05.html" title="3.4.5. Modificar objetos externos" />
    <link rel="next" href="ch03s04s07.html" title="3.4.7. Punteros y Referencias como modificadores" />
  </head>
  <body>
    <div class="navfooter">
      <hr />
      <table width="100%" summary="Navigation footer">
        <tr>
          <td class="navititle" width="1%">
            <a accesskey="p" href="ch03s04s05.html">
              <img src="./images/prev.png" alt="Anterior" />
            </a>
          </td>
          <td class="navititle" width="40%" align="left">
            <a accesskey="p" href="ch03s04s05.html">3.4.5. Modificar objetos externos</a>
          </td>
          <td width="10%" align="center">
            <a accesskey="u" href="ch03s04.html">
              <img src="./images/up.png" alt="Subir" />
            </a>
          </td>
          <td class="navititle" width="40%" align="right">
            <a accesskey="n" href="ch03s04s07.html">3.4.7.  Punteros y Referencias como modificadores </a>
          </td>
          <td class="navititle" width="1%" align="right">
            <a accesskey="n" href="ch03s04s07.html">
              <img src="./images/next.png" alt="Siguiente" />
            </a>
          </td>
        </tr>
      </table>
    </div>
    <div class="sect2" title="3.4.6. Introducción a las referencias de C++">
      <div class="titlepage">
        <div>
          <div>
            <h3 class="title"><a id="idp4491512"></a>3.4.6. Introducción a las referencias de C++</h3>
          </div>
        </div>
      </div>
      <p>
	Los punteros funcionan más o menos igual en C y en C++, pero C++
	añade un modo adicional de pasar una dirección a una función. Se
	trata del <span class="emphasis"><em>paso-por-referencia</em></span> y existe en
	otros muchos lenguajes, de modo que no es una invención de C++.
      </p>
      <p>
	La primera impresión que dan las referencias es que no son
	necesarias, que se pueden escribir cualquier programa sin
	referencias. En general, eso es verdad, con la excepción de unos
	pocos casos importantes que se tratarán más adelante en el
	libro, pero la idea básica es la misma que la demostración
	anterior con el puntero: se puede pasar la dirección de un
	argumento utilizando una referencia. La diferencia entre
	referencias y punteros es que <span class="emphasis"><em>invocar</em></span> a una
	función que recibe referencias es mas limpio, sintácticamente,
	que llamar a una función que recibe punteros (y es exactamente
	esa diferencia sintáctica la que hace a las referencias
	esenciales en ciertas situaciones). Si
	<code class="filename">PassAddress.cpp</code> se modifica para utilizar
	referencias, se puede ver la diferencia en la llamada a la
	función en <code class="function">main()</code>:
      </p>
      <div class="example">
        <a id="idp4495128"></a>
        <div class="example-contents">
          <pre class="programlisting">
<span class="hl slc">//: C03:PassReference.cpp</span>
<span class="hl ppc">#include &lt;iostream&gt;</span>
<span class="hl kwa">using namespace</span> std<span class="hl opt">;</span>

<span class="hl kwb">void</span> <span class="hl kwd">f</span><span class="hl opt">(</span><span class="hl kwb">int</span><span class="hl opt">&amp;</span> r<span class="hl opt">) {</span>
  cout <span class="hl opt">&lt;&lt;</span> <span class="hl str">&quot;r = &quot;</span> <span class="hl opt">&lt;&lt;</span> r <span class="hl opt">&lt;&lt;</span> endl<span class="hl opt">;</span>
  cout <span class="hl opt">&lt;&lt;</span> <span class="hl str">&quot;&amp;r = &quot;</span> <span class="hl opt">&lt;&lt; &amp;</span>r <span class="hl opt">&lt;&lt;</span> endl<span class="hl opt">;</span>
  r <span class="hl opt">=</span> <span class="hl num">5</span><span class="hl opt">;</span>
  cout <span class="hl opt">&lt;&lt;</span> <span class="hl str">&quot;r = &quot;</span> <span class="hl opt">&lt;&lt;</span> r <span class="hl opt">&lt;&lt;</span> endl<span class="hl opt">;</span>
<span class="hl opt">}</span>

<span class="hl kwb">int</span> <span class="hl kwd">main</span><span class="hl opt">() {</span>
  <span class="hl kwb">int</span> x <span class="hl opt">=</span> <span class="hl num">47</span><span class="hl opt">;</span>
  cout <span class="hl opt">&lt;&lt;</span> <span class="hl str">&quot;x = &quot;</span> <span class="hl opt">&lt;&lt;</span> x <span class="hl opt">&lt;&lt;</span> endl<span class="hl opt">;</span>
  cout <span class="hl opt">&lt;&lt;</span> <span class="hl str">&quot;&amp;x = &quot;</span> <span class="hl opt">&lt;&lt; &amp;</span>x <span class="hl opt">&lt;&lt;</span> endl<span class="hl opt">;</span>
  <span class="hl kwd">f</span><span class="hl opt">(</span>x<span class="hl opt">);</span> <span class="hl slc">// Looks like pass-by-value, </span>
        <span class="hl slc">// is actually pass by reference</span>
  cout <span class="hl opt">&lt;&lt;</span> <span class="hl str">&quot;x = &quot;</span> <span class="hl opt">&lt;&lt;</span> x <span class="hl opt">&lt;&lt;</span> endl<span class="hl opt">;</span>
<span class="hl opt">}</span> <span class="hl slc">///:~</span>
</pre>
        </div>
        <p class="title">
          <strong>Listado 3.17. C03/PassReference.cpp</strong>
        </p>
      </div>
      <br class="example-break" />
      <p>
        En la lista de argumentos de <code class="function">f()</code>, en lugar
        de escribir <code class="type">int*</code> para pasar un puntero, se escribe
        <code class="type">int&amp;</code> para pasar una referencia. Dentro de
        <code class="function">f()</code>, si dice simplemente
        <code class="varname">r</code> (lo que produciría la dirección si
        <code class="varname">r</code> fuese un puntero) se obtiene <span class="emphasis"><em>el
        valor en la variable que <code class="varname">r</code> está
        referenciando</em></span>. Si se asigna a <code class="varname">r</code>,
        en realidad se está asignado a la variable a la que que
        <code class="varname">r</code> referencia.  De hecho, la única manera de
        obtener la dirección que contiene <code class="varname">r</code> es con el
        operador <code class="literal">&amp;</code>.
      </p>
      <p>
	En <code class="function">main()</code>, se puede ver el efecto clave de
	las referencias en la sintaxis de la llamada a
	<code class="function">f()</code>, que es simplemente
	<code class="code">f(x)</code>. Aunque eso parece un paso-por-valor
	ordinario, el efecto de la referencia es que en realidad toma la
	dirección y la pasa, en lugar de hacer una copia del valor. La
	salida es:
      </p>
      <pre class="screen">
x = 47
&amp;x = 0065FE00
r = 47
&amp;r = 0065FE00
r = 5
x = 5
</pre>
      <p>
	De manera que se puede ver que un paso-por-referencia permite a
	una función modificar el objeto externo, al igual que al pasar
	un puntero (también se puede observar que la referencia esconde
	el hecho de que se está pasando una dirección; esto se verá más
	adelante en el libro). Gracias a esta pequeña introducción se
	puede asumir que las referencias son sólo un modo
	sintácticamente distinto (a veces referido como «azúcar
	sintáctico») para conseguir lo mismo que los punteros:
	permitir a las funciones cambiar los objetos externos.
      </p>
    </div>
    <div class="navfooter">
      <hr />
      <table width="100%" summary="Navigation footer">
        <tr>
          <td class="navititle" width="1%">
            <a accesskey="p" href="ch03s04s05.html">
              <img src="./images/prev.png" alt="Anterior" />
            </a>
          </td>
          <td class="navititle" width="40%" align="left">
            <a accesskey="p" href="ch03s04s05.html">3.4.5. Modificar objetos externos</a>
          </td>
          <td width="10%" align="center">
            <a accesskey="u" href="ch03s04.html">
              <img src="./images/up.png" alt="Subir" />
            </a>
          </td>
          <td class="navititle" width="40%" align="right">
            <a accesskey="n" href="ch03s04s07.html">3.4.7.  Punteros y Referencias como modificadores </a>
          </td>
          <td class="navititle" width="1%" align="right">
            <a accesskey="n" href="ch03s04s07.html">
              <img src="./images/next.png" alt="Siguiente" />
            </a>
          </td>
        </tr>
        <tr>
          <td valign="top"> </td>
          <td> </td>
          <td width="10%" align="center">
            <a accesskey="h" href="index.html">
              <img src="./images/home.png" alt="Inicio" />
            </a>
          </td>
          <td> </td>
          <td valign="top"> </td>
        </tr>
      </table>
    </div>
  </body>
</html>
